/*
 *  Copyright 2017 Adobe Systems Incorporated. All rights reserved.
 *  This file is licensed to you under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License. You may obtain a copy
 *  of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software distributed under
 *  the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 *  OF ANY KIND, either express or implied. See the License for the specific language
 *  governing permissions and limitations under the License.
 */
var UNC=function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"_preprocess",value:function(e){for(var t=0;t<e.length;++t)"string"==typeof e[t]&&e[t].length>10512&&(e[t]=e[t].substring(0,10512)+".....<Truncated>")}},{key:"getStringFromArgs",value:function(e){for(var t="",n=0;n<e.length;n++)"string"==typeof e[n]?t+=e[n]:e[n]&&(t+=JSON.stringify(e[n]));return t}},{key:"error",value:function(){if(!window.logLevel||0!==window.logLevel){var e=Array.prototype.slice.call(arguments);try{window.JSObject&&window.JSObject.logError(this.getStringFromArgs(e))}catch(e){}console.error.apply(console,e)}}},{key:"warn",value:function(){if(window.logLevel&&window.logLevel>=2){var e=Array.prototype.slice.call(arguments);try{window.JSObject&&window.JSObject.logWarn(this.getStringFromArgs(e))}catch(e){}console.warn.apply(console,e)}}},{key:"log",value:function(){if(window.logLevel&&window.logLevel>=3){var e=Array.prototype.slice.call(arguments);this._preprocess(e);try{window.JSObject&&window.JSObject.logInfo(this.getStringFromArgs(e))}catch(e){}console.trace&&console.trace.apply(console,e)}}},{key:"info",value:function(){if(window.logLevel&&window.logLevel>=3){var e=Array.prototype.slice.call(arguments);this._preprocess(e);try{window.JSObject&&window.JSObject.logInfo(this.getStringFromArgs(e))}catch(e){}console.trace&&console.trace.apply(console,e)}}},{key:"debug",value:function(){if(window.logLevel&&window.logLevel>=4){var e=Array.prototype.slice.call(arguments);this._preprocess(e);try{window.JSObject&&window.JSObject.logDebug(this.getStringFromArgs(e))}catch(e){}console.trace&&console.trace.apply(console,e)}}},{key:"trace",value:function(){if(window.logLevel&&window.logLevel>=5){var e=Array.prototype.slice.call(arguments);this._preprocess(e);try{window.JSObject&&window.JSObject.logTrace(this.getStringFromArgs(e))}catch(e){}console.trace&&console.trace.apply(console,e)}}}]),e}();t.default=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerConfigurationManager=t.GlobalContext=t.GlobalData=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(23)),r=s(n(6)),o=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}var u=new(function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._globalData={appID:null,context:null,appBundleID:null,pushDeviceID:null,imsClientID:null,xApiKey:null,machineDeviceToken:null,deviceLocale:"en_US",platform:null,osName:null,osVersion:null,productName:"Creative Cloud",productVersion:null,env:"prod",locale:"en_US",surface:"web",isLongPollFeatureEnabled:!0,isDevicePushEnabled:!1,analytics:"ETS",analyticsEnabled:!1,serverTimeDelta:0,serverTimestampOnLaunch:0,preferencesTimeOut:20,getCurrentServerTimestamp:function(){return(new Date).getTime()-t._globalData.serverTimeDelta}},this._serverConfigurationManager=new i.default,this._serverConfigurationManager.initialize(this._globalData),this._manager=null}return a(e,[{key:"initialize",value:function(e){var t=e,n=!!t.appID;return n&&(this._globalData.context=t,this._globalData.appID=t.appID,this._globalData.imsClientID=t.imsClientID,this._globalData.env=t.env.toLowerCase(),this._globalData.locale=t.locale,t.surface&&(this._globalData.surface=t.surface.toLowerCase()),void 0!==t.analyticsEnabled&&(this._globalData.analyticsEnabled="true"===t.analyticsEnabled.toString().toLowerCase(),this._globalData.analyticsEnabled?"desktop"===this._globalData.surface?o.default.sendAnalyticsForUserPreferenceForAnalytics(!0,"consent"):r.default.sendAnalyticsForUserPreferenceForAnalytics(!0,"consent"):"desktop"===this._globalData.surface?o.default.sendAnalyticsForUserPreferenceForAnalytics(!1,"consent"):r.default.sendAnalyticsForUserPreferenceForAnalytics(!1,"consent")),this._globalData.appBundleID=t.appBundleID,this._globalData.osName=t.osName,this._globalData.osVersion=t.osVersion,this._globalData.productName=t.productName,this._globalData.productVersion=t.productVersion,void 0!==t.surface&&(this._globalData.surface=t.surface.toLowerCase()),void 0!==t.platform&&(this._globalData.platform=t.platform.toLowerCase()),void 0!==t.machineDeviceToken&&(this._globalData.machineDeviceToken=t.machineDeviceToken),void 0!==t.pushDeviceID&&(this._globalData.pushDeviceID=t.pushDeviceID),void 0!==t.isDevicePushEnabled&&(this._globalData.isDevicePushEnabled=t.isDevicePushEnabled),void 0!==t.deviceOSLocale&&(this._globalData.deviceOSLocale=t.deviceOSLocale),void 0!==t["x-api-key"]?this._globalData.xApiKey=t["x-api-key"]:this._globalData.xApiKey=this._globalData.imsClientID,this._serverConfigurationManager.initialize(this._globalData)),n}},{key:"setData",value:function(e){return!!e&&(this._globalData.serverTimestampOnLaunch=e.serverTimestampOnLaunch,this._globalData.serverTimeDelta=e.serverTimeDelta?e.serverTimeDelta:0,this._globalData.env=e.env?e.env:this._globalData.env,this._globalData.locale=e.locale?e.locale:this._globalData.locale,!0)}}]),e}()),l=u._globalData,c=u._serverConfigurationManager;t.GlobalData=l,t.GlobalContext=u,t.ServerConfigurationManager=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(1),o=u(n(0)),s=u(n(24));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._observers=new Map,this._sourcePropertySeparator="|*#%",this._callback=function(e){o.default.error("UNCEngine: NotificationDispatcher: No callback registered, messageObject: ",e)}}return i(e,[{key:"_preprocessObserversList",value:function(e){if(!e||"object"!==(void 0===e?"undefined":a(e))||!e.data||"object"!==a(e.data)||!e.data.namespace||"string"!=typeof e.data.namespace)return!1;e.data.observersList&&Array.isArray(e.data.observersList)||(e.data.observersList&&(e.data.observersList.type||e.data.observersList.subtype)?e.data.observersList=[{type:e.data.observersList.type?e.data.observersList.type:"*",subtype:e.data.observersList.subtype?e.data.observersList.subtype:"*"}]:e.data.observersList=[{type:"*",subtype:"*"}]);for(var t=0;t<e.data.observersList.length;t+=1)e.data.observersList[t].type=e.data.observersList[t].type?e.data.observersList[t].type:"*",e.data.observersList[t].subtype=e.data.observersList[t].subtype?e.data.observersList[t].subtype:"*";return!0}},{key:"_addRule",value:function(e,t,n,a,i,r){var o="internal";"true"===n&&(o="external"),void 0===t&&(t="");for(var s=e+this._sourcePropertySeparator+t+this._sourcePropertySeparator+o,u=0;u<i.length;u+=1){var l=i[u].type,c=i[u].subtype;this._observers.has(s)||this._observers.set(s,new Map),this._observers.get(s).has(a)||this._observers.get(s).set(a,new Set),this._observers.get(s).get(a).add({mode:r,type:l,subType:c})}return!0}},{key:"_getListenersList",value:function(e,t){var n=new Set;return this._observers.forEach(function(a,i){a.forEach(function(a,r){var o=!1;a.forEach(function(n,a){"*"!==n.type&&n.type!==e||"*"!==n.subType&&n.subType!==t||(o="+"===n.mode)}),o&&n.add({id:i,namespace:r})})}),n}},{key:"setClientCallback",value:function(e){return this._callback=e,!0}},{key:"registerObserver",value:function(e){return e&&e.data&&e.data.callbackFn&&"function"==typeof e.data.callbackFn?s.default.registerObserver(e):!!this._preprocessObserversList(e)&&this._addRule(e.sourceID,e.sourceVersion,e.isMsgExternal,e.data.namespace,e.data.observersList,"+")}},{key:"unregisterObserver",value:function(e){return e&&e.data&&e.data.callbackFn&&"function"==typeof e.data.callbackFn?s.default.unregisterObserver(e):!!this._preprocessObserversList(e)&&this._addRule(e.sourceID,e.sourceVersion,e.isMsgExternal,e.data.namespace,e.data.observersList,"-")}},{key:"notifyObservers",value:function(e){for(var t=this,n=new Map,a=function(a){t._getListenersList(e[a].type,e[a]["sub-type"]).forEach(function(i){try{if("UNCWidget"===i.id)if(n.has(i.id)){var r=n.get(i.id);r.notifsToProvide&&r.notifsToProvide.notifications&&r.notifsToProvide.notifications.notification.push(e[a])}else{var s={notifications:{notification:[e[a]]}},u={};u.listenerDetails=i,u.notifsToProvide=s,n.set(i.id,u)}else{var l={notifications:{notification:[e[a]]}},c=i.id.split(t._sourcePropertySeparator),d={targetType:"Applet",targetID:c[0],targetVersion:c[1],isMsgExternal:"internal"===c[2]?"false":"true",message:i.namespace,data:l};t._callback(d)}}catch(e){o.default.error("UNCEngine: NotificationDispatcher: notifyObservers - Callback exception: ",e)}})},i=0;i<e.length;i+=1)a(i);return n.size>0&&n.forEach(function(e){try{var n=e.listenerDetails,a=n.id.split(t._sourcePropertySeparator),i={targetType:"Applet",targetID:a[0],targetVersion:a[1],isMsgExternal:"internal"===a[2]?"false":"true",message:n.namespace,data:e.notifsToProvide};t._callback(i)}catch(e){o.default.error("UNCEngine: NotificationDispatcher: notifyObservers - Callback exception: ",e)}}),s.default.notifyObservers(e),!0}},{key:"broadcastServerTimestamp",value:function(e){if(e&&"number"!=typeof e)o.default.warn("UNCEngine: NotificationDispatcher: broadcastTimestamp - Input 'timestamp' is not valid!!");else{var t=e?e-(new Date).getTime():0;r.GlobalContext.setData({serverTimestampOnLaunch:e,serverTimeDelta:t});var n={};n.value=t,this.sendMessageToApplet("TimestampDrift",n,"*")}}},{key:"sendUpdateAnalyticsConfigToWidget",value:function(e){this.sendMessageToApplet("UpdateAnalyticsConfig",e,"UNCWidget")}},{key:"sendMessageToClient",value:function(e){if(!e||"object"!==(void 0===e?"undefined":a(e))||!e.message||"string"!=typeof e.message)return!1;try{return this._callback(e)}catch(e){o.default.error("UNCEngine: NotificationDispatcher: sendDataToClient - Callback exception: ",e)}return!0}},{key:"sendTrayNotificationData",value:function(e){if(e.length){var t={notifications:{notification:e}};this.sendMessageToParent("ShowOSTray",!0,t)}return!0}},{key:"_sendMessage",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r={};return r.message=e,r.data=t,r.targetType=n,r.targetID=a,r.isAsync=i,this.sendMessageToClient(r)}},{key:"sendMessageToApplet",value:function(e,t,n){return this._sendMessage(e,t,"Applet",n)}},{key:"sendMessageToCoreExt",value:function(e,t,n){return this._sendMessage(e,t,"CoreExt",n)}},{key:"sendMessageToParent",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this._sendMessage(e,n,"Parent","",t)}}]),e}();t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={OneSecond:1e3,TimeOutErrorCountLimit:4,ClientErrorCountLimit:4,ServerErrorCountLimit:10,InternalNetworkErrorCountLimit:10,COREEXT_TARGET_TYPE:"CoreExt",ANALYTICS_DESKTOP_TARGET_ID:"AnalyticsCoreExt",ConfigurationKey:"notification-configuration",CONTAINER_BL:"C3Container_BL",CCDCONTAINER_JS:"CCDContainer_JS",SwitchedToLongPollEvent:"ACCC_SWITCHED_TO_LONGPOLL",SwitchedToLongPollEventWin:"ACCC_WIN_PUSH_NOTIFICATION",DevicePushSet:"ACCC_DEVICE_PUSH_SET",DevicePushEnabledWin:"ANS_CONNECTION_ESTABLISHED",DevicePushDisabledWin:"DISABLED",DevicePushFeatureDisabled:"FeatureDisabled",PushServiceNotRunning:"PushServiceNotRunning",DeviceTokenNotAvailable:"DeviceTokenUnAvailable",AccessTokenMissing:"AccessTokenMissing",DevicePushFailureReason:"@reason",DevicePushFailureErrorCode:"@errorCode",DevicePushFailureReasonWin:"@Notification_Status_Reason",EnableForSurface:"enabled-for-surfaces",PerSurface:"PER_SURFACE"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(19)),r=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.default.debug("Skynet: NetworkCommunicator: NetworkCommunicator is being constructed for request",t),this.networkCommunicatorImplObj=new i.default(t)}return a(e,[{key:"SendRequest",value:function(e){r.default.debug("Skynet: NetworkCommunicator: SendRequest - Sending request.....: ",e),this.networkCommunicatorImplObj.sendRequest(e)}},{key:"GetResponseHeaders",value:function(){return r.default.debug("Skynet: NetworkCommunicator: GetResponseHeaders - Get Response headers....."),this.networkCommunicatorImplObj.getResponseHeaders()}},{key:"CancelRequest",value:function(){r.default.debug("Skynet: NetworkCommunicator: CancelRequest - Cancels Request"),this.networkCommunicatorImplObj.cancelRequest()}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(1),r=l(n(2)),o=l(n(0)),s=l(n(3)),u=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"isNELongPollEnabled",value:function(){return i.ServerConfigurationManager.longPollEnabled&&i.GlobalData.isLongPollFeatureEnabled}},{key:"_getUserAccessToken",value:function(){var e=new Date,t=Math.round(e.getTime()/1e3),n=r.default.sendMessageToParent("GetUserProfile",!1);if(n){if(i.GlobalData.surface&&"DESKTOP"===i.GlobalData.surface.toUpperCase()&&n.AccessTokenValidTill&&t>n.AccessTokenValidTill){o.default.warn("NotificationHTTPRequestUtils: _getUserAccessToken: current time since epoc in second : ",t," access_token is expired was valid till : ",n.AccessTokenValidTill);try{u.default.sendAnalyticsForAccessTokenExpiry(n.AccessTokenValidTill)}catch(e){o.default.warn("NotificationHTTPRequestUtils: _getUserAccessToken: error while sending analytics ",e)}return null}return n.AccessToken}return null}},{key:"_sanityCheck",value:function(e,t){return e?!!t||(o.default.warn("Access Token cannot be empty. "),!1):(o.default.warn("Application Identifier cannot be empty. "),!1)}},{key:"_createHTTPCommunicatorRequest",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=(arguments.length>6&&void 0!==arguments[6]&&arguments[6],{}),c={},d={requestHeaders:{},queryParams:{}},f=i.GlobalData.appID,h=e._getUserAccessToken();if(!e._sanityCheck(f,h))return o.default.warn("Input Request is not valid. Either AccessToken or AppID is not valid"),null;switch(c.scheme="https",c.hostname=u?i.ServerConfigurationManager.serverBaseUrl:i.ServerConfigurationManager.serverBaseAdobeIOUrl,c.path=n,c.methodType=t,d.requestHeaders["x-adobe-app-id"]=f,n!==i.ServerConfigurationManager.serverBackFillUri?d.requestHeaders["x-user-token"]="Bearer "+h:d.requestHeaders.Authorization="Bearer "+h,u||(d.requestHeaders["x-api-key"]=i.GlobalData.xApiKey),d.requestHeaders["Cache-Control"]="no-cache, no-store, must-revalidate",d.requestHeaders.Pragma="no-cache",d.requestHeaders.Expires="0",d.requestHeaders.Accept="application/json",t){case"GET":if(d.queryParams.page_size=i.ServerConfigurationManager.pageSize.toString(),d.queryParams.config_version=i.ServerConfigurationManager.configVersion,d.queryParams.locale=i.GlobalData.locale,d.queryParams.current_mc_time=(new Date).getTime().toString(),r&&(d.queryParams.to=r.toString()),s&&(d.queryParams.from=s.toString()),u){var p=i.ServerConfigurationManager.longPollTimeout;d.timeoutInSec=p+20,d.requestHeaders["x-long-poll-time-out"]=p}break;case"POST":case"PUT":d.requestHeaders["Content-Type"]="application/json",d.content=a}return l.request=c,l.requestData=d,l}},{key:"createNotificationGetRequest",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return e._createHTTPCommunicatorRequest("GET",t,"",n,a,i,r)}},{key:"createNotificationPostRequest",value:function(t){return e._createHTTPCommunicatorRequest("POST",i.ServerConfigurationManager.serverShortPollUri,t)}},{key:"createNotificationPutRequest",value:function(t){return e._createHTTPCommunicatorRequest("PUT",i.ServerConfigurationManager.serverShortPollUri,t)}},{key:"_createNotificationCustomizedRequest",value:function(t,n,a,r,s){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l={},c={},d={requestHeaders:{},queryParams:{}},f=i.GlobalData.appID,h=e._getUserAccessToken();return e._sanityCheck(f,h)?(c.scheme="https",c.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,c.path=s,c.methodType=n,d.requestHeaders["x-adobe-app-id"]=f,d.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,d.requestHeaders[r]="Bearer "+h,d.requestHeaders["Content-Type"]="application/json",d.requestHeaders.Accept="application/json",d.queryParams&&(d.queryParams=a),u&&(d.responseType=u),d.content=JSON.stringify(t),l.request=c,l.requestData=d,l):(o.default.warn("Input Request is not valid. Either AccessToken or AppID is not valid"),null)}},{key:"createNotificationBadgeClearRequest",value:function(t){return navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")>0?e._createNotificationCustomizedRequest(t,"PUT",null,"x-user-token",i.ServerConfigurationManager.serverNotificationUnreadCountURI,"text"):e._createNotificationCustomizedRequest(t,"PUT",null,"x-user-token",i.ServerConfigurationManager.serverNotificationUnreadCountURI)}},{key:"createNotificationCriteriaBasedSearchRequest",value:function(t){return e._createNotificationCustomizedRequest(t,"POST",null,"Authorization",i.ServerConfigurationManager.serverNotificationSearchURI)}},{key:"createDeviceRegistrationRequest",value:function(){var t={},n={},a={requestHeaders:{}};if(!i.GlobalData.machineDeviceToken&&"macos"===i.GlobalData.platform)return o.default.warn("Machine Device token is currently not available. Ignoring device registration request"),null;var r=i.GlobalData.appID,s=e._getUserAccessToken();if(!e._sanityCheck(r,s))return o.default.warn("Input Request is not valid. Either AccessToken or AppID is not valid"),null;n.scheme="https",n.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,n.path=i.ServerConfigurationManager.serverDeviceRegisterUnRegisterURI,n.path+=i.GlobalData.platform,n.methodType="POST",a.requestHeaders["x-adobe-app-id"]=r,a.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,a.requestHeaders.Authorization="Bearer "+s,a.requestHeaders["Content-Type"]="application/json",a.requestHeaders.Accept="application/json",i.GlobalData.pushDeviceID&&(a.requestHeaders["x-adobe-device-id"]=i.GlobalData.pushDeviceID);var u={};return u["device-os-version"]=i.GlobalData.osVersion,u.locale=i.GlobalData.deviceOSLocale,"windows"===i.GlobalData.platform?(u["windows-package-identity-name"]="AdobeNotificationClient",u["windows-channel-uri"]=i.GlobalData.context.ChannelURI):(u["macos-bundle-id"]=i.GlobalData.appBundleID,u["macos-device-token"]=i.GlobalData.machineDeviceToken),a.content=JSON.stringify(u),t.request=n,t.requestData=a,t}},{key:"createDeviceUnRegistrationRequest",value:function(){var t={},n={},a={requestHeaders:{}};if(!i.GlobalData.pushDeviceID)return o.default.warn("Push Device token is missing. Ignoring device un-registration request"),null;var r=i.GlobalData.appID,s=e._getUserAccessToken();return e._sanityCheck(r,s)?(n.scheme="https",n.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,n.path=i.ServerConfigurationManager.serverDeviceRegisterUnRegisterURI,n.path+=i.GlobalData.platform,n.methodType="DELETE",a.requestHeaders["x-adobe-app-id"]=i.GlobalData.appID,a.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,a.requestHeaders.Authorization="Bearer "+s,a.requestHeaders["x-adobe-device-id"]=i.GlobalData.pushDeviceID,t.request=n,t.requestData=a,t):(o.default.warn("Input Request is not valid. Either AccessToken or AppID is not valid"),null)}},{key:"createPreferencesGetRequest",value:function(t){o.default.info("NotificationHTTPRequestUtils : createPreferencesGetRequest content received ",t);var n={},a={},r={requestHeaders:{},queryParams:{}},s=i.GlobalData.appID,u=e._getUserAccessToken();if(!e._sanityCheck(s,u))return o.default.warn("NotificationHTTPRequestUtils : createPreferencesGetRequest input request is not valid. Either AccessToken or AppID is not valid"),null;a.scheme="https",a.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,a.path=i.ServerConfigurationManager.serverUserPreferencesURI,a.methodType="GET",r.requestHeaders["x-adobe-app-id"]=i.GlobalData.appID,r.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,r.requestHeaders.Authorization="Bearer "+u,r.requestHeaders["Content-Type"]="application/json",r.requestHeaders["Cache-Control"]="no-cache, no-store, must-revalidate",r.requestHeaders.Pragma="no-cache",r.requestHeaders.Expires="0",r.requestHeaders.Accept="application/json",r.queryParams.page_size=i.ServerConfigurationManager.pageSize.toString(),r.queryParams.config_version=i.ServerConfigurationManager.configVersion,r.queryParams.current_mc_time=(new Date).getTime().toString(),r.timeoutInSec=i.GlobalData.preferencesTimeOut;var l=t.categories.category;return l&&(r.queryParams.category=l.toString(),r.queryParams.locale=i.GlobalData.locale),n.request=a,n.requestData=r,n}},{key:"createPreferencesSetRequest",value:function(t){o.default.info("NotificationHTTPRequestUtils : createPreferencesSetRequest content received ",t);var n={},a={},r={requestHeaders:{}},u=i.GlobalData.appID,l=e._getUserAccessToken();if(!e._sanityCheck(u,l))return o.default.warn("NotificationHTTPRequestUtils : createPreferencesSetRequest input request is not valid. Either AccessToken or AppID is not valid"),null;a.scheme="https",a.hostname=i.ServerConfigurationManager.serverBaseAdobeIOUrl,a.path=i.ServerConfigurationManager.serverUserPreferencesURI,a.methodType="PUT",r.requestHeaders["x-adobe-app-id"]=i.GlobalData.appID,r.requestHeaders["x-api-key"]=i.GlobalData.xApiKey,r.requestHeaders.Authorization="Bearer "+l,r.requestHeaders["Content-Type"]="application/json",r.requestHeaders["Cache-Control"]="no-cache, no-store, must-revalidate",r.requestHeaders.Pragma="no-cache",r.timeoutInSec=i.GlobalData.preferencesTimeOut;var c=t.preferences,d={categories:[]};for(var f in c){var h={};h.category=f,h[s.default.EnableForSurface]=s.default.PerSurface,h.surfaces=[{surface:t.surface,enabled:c[f]}],d.categories.push(h)}return r.content=JSON.stringify(d),n.request=a,n.requestData=r,n}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=l(n(25)),o=n(1),s=l(n(0)),u=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getDefaultObjectForUNCForAnalytics",value:function(){var e={xApiKey:"unc-web-service",apiKey:"unc-web-service",source:"UNC",project:"unc-web-service"};return"prod"!==o.GlobalData.env.toLowerCase()?(e.environment="stage",e.rsid="adbem-cchome-dev"):(e.environment="prod",e.rsid="adbem-cchome-prod"),e}},{key:"sendAnalyticsForReceiptOfNotification",value:function(e){if(o.GlobalData.analyticsEnabled){s.default.info("UNCEngine: EngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification :  notification object is ",e);var t=new r.default(this.getDefaultObjectForUNCForAnalytics());t.initializeDefaultData();var n=void 0,i=void 0,l={};t.setDataValue("event","type","receipt"),t.setDataValue("event","subtype","notification"),t.setDataValue("event","subcategory","Message"),this.setConstantFieldsWithValues(t),e["notification-id"]&&""!==e["notification-id"]&&t.setDataValue("content","id",e["notification-id"]),e.type&&""!==e.type&&e["sub-type"]&&""!==e["sub-type"]&&t.setDataValue("content","type",e.type+":"+e["sub-type"]),"NEW"===e.state?t.setDataValue("content","status","unread"):t.setDataValue("content","status","read");try{var c="object"===a(e.payload)?e.payload:JSON.parse(e.payload);if(e.metadata&&e.metadata["tracking-system-payload"]&&""!==e.metadata["tracking-system-payload"]){t.setDataValue("custom","ans.client_payload",e.metadata["tracking-system-payload"]),l=e.metadata["tracking-system-payload"];try{l=JSON.parse(l),Object.prototype.hasOwnProperty.call(l,u.default.CAMPAIGN_ID)&&(n=l.CAMPAIGN_ID),Object.prototype.hasOwnProperty.call(l,u.default.VARIATION_ID)&&(i=l.VARIATION_ID)}catch(e){s.default.warn("UNCEngine: EngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification : metadata parsing failed with error : ",e)}}if(c["tracking-system-payload"]&&""!==c["tracking-system-payload"]){t.setDataValue("custom","ans.client_payload",c["tracking-system-payload"]),l=c["tracking-system-payload"];try{l=JSON.parse(l),Object.prototype.hasOwnProperty.call(l,u.default.CAMPAIGN_ID)&&(n=l.CAMPAIGN_ID),Object.prototype.hasOwnProperty.call(l,u.default.VARIATION_ID)&&(i=l.VARIATION_ID)}catch(e){s.default.warn("UNCEngine: EngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification : tracking payload parsing failed with error :",e)}}}catch(e){s.default.warn("UNCEngine: EngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification : Error in paylaod parsing")}n&&t.setDataValue("exp","campaign_id",n),i&&t.setDataValue("exp","variation_id",i),t.addToCollection(),t.sendToIngest()}}},{key:"sendAnalyticsForUserPreferenceForAnalytics",value:function(e,t){var n=new r.default(this.getDefaultObjectForUNCForAnalytics());if(n.initializeDefaultData(),n.setDataValue(u.default.Event_Section,"type","click"),n.setDataValue(u.default.Event_Section,"subcategory","Privacy Notice"),e?n.setDataValue(u.default.Event_Section,"subtype","opt-in"):n.setDataValue(u.default.Event_Section,"subtype","opt-out"),t&&n.setDataValue(u.default.Event_Section,"value",t),o.GlobalData.context.analyticsConfig&&o.GlobalData.context.analyticsConfig.evidonDetails&&"object"===a(o.GlobalData.context.analyticsConfig.evidonDetails))for(var i=Object.keys(o.GlobalData.context.analyticsConfig.evidonDetails),s=0;s<i.length;s+=1){var l=i[s];-1!==u.default.Evidon_Supported_Keys.indexOf(l)&&("name"===l?n.setDataValue(u.default.Environment_Section,"svc.name",o.GlobalData.context.analyticsConfig.evidonDetails[l]):"version"===l&&n.setDataValue(u.default.Environment_Section,"svc.version",o.GlobalData.context.analyticsConfig.evidonDetails[l]))}this.setConstantFieldsWithValues(n),n.addToCollection(),n.sendToIngest()}},{key:"setConstantFieldsWithValues",value:function(e){if(e.setDataValue("event","workflow","UNC"),e.setDataValue("event","category","WEB"),o.GlobalData.deviceType&&"Mobile"===o.GlobalData.deviceType?e.setDataValue("source","platform","MOBILE"):e.setDataValue("source","platform","WEB"),e.setDataValue("source","name","UNC"),e.setDataValue("source","version",u.default.VERSION_PARAM),o.GlobalData.imsClientID&&""!==o.GlobalData.imsClientID&&e.setDataValue("source","client_id",o.GlobalData.imsClientID),o.GlobalData.context.analyticsConfig&&o.GlobalData.context.analyticsConfig.componentDetails&&"object"===a(o.GlobalData.context.analyticsConfig.componentDetails))for(var t=Object.keys(o.GlobalData.context.analyticsConfig.componentDetails),n=0;n<t.length;n+=1){var i=t[n];-1!==u.default.Component_Supported_Keys.indexOf(i)&&("name"===i?e.setDataValue(u.default.Environment_Section,"com.name",o.GlobalData.context.analyticsConfig.componentDetails[i]):"version"===i&&e.setDataValue(u.default.Environment_Section,"com.version",o.GlobalData.context.analyticsConfig.componentDetails[i]))}if(o.GlobalData.context.analyticsConfig&&o.GlobalData.context.analyticsConfig.eventDetails&&"object"===a(o.GlobalData.context.analyticsConfig.eventDetails))for(var r=Object.keys(o.GlobalData.context.analyticsConfig.eventDetails),s=0;s<r.length;s+=1){var l=r[s];-1!==u.default.Event_Supported_Keys.indexOf(l)&&e.setDataValue(u.default.Event_Section,l,o.GlobalData.context.analyticsConfig.eventDetails[l])}if(o.GlobalData.context.analyticsConfig&&o.GlobalData.context.analyticsConfig.consumerDetails&&"object"===a(o.GlobalData.context.analyticsConfig.consumerDetails)){for(var c=Object.keys(o.GlobalData.context.analyticsConfig.consumerDetails),d=0;d<c.length;d+=1){var f=c[d];-1!==u.default.Consumer_Supported_Keys.indexOf(f)&&e.setDataValue(u.default.Consumer_Section,f,o.GlobalData.context.analyticsConfig.consumerDetails[f])}var h=e.getDevice();h&&""!==h&&e.setDataValue(u.default.Consumer_Section,"device",h);var p=e.getOSVersion();p&&""!==p&&e.setDataValue(u.default.Consumer_Section,"os_version",p)}var g=e.getDevice();g&&""!==g&&e.setDataValue("consumer","device",g);var v=e.getOSVersion();v&&""!==v&&e.setDataValue("consumer","os_version",v)}}]),e}();t.default=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={PROD_BASE_PATH:"https://prod.adobeccstatic.com",DEV_BASE_PATH:"https://dev.adobeccstatic.com",STAGE_BASE_PATH:"https://stage.adobeccstatic.com",QE_BASE_PATH:"https://qe.adobeccstatic.com",PATH_PARAM:"unc",VERSION_PARAM:"8.6",LATEST_VERSION_PARAM:"latest",Consumer_Supported_Keys:["client_id","name","version","platform","app_store_id"],Component_Supported_Keys:["name","version"],Event_Supported_Keys:["visitor_guid"],Evidon_Supported_Keys:["name","version"],Event_Section:"event",Source_Section:"source",Content_Section:"content",UI_Section:"ui",Environment_Section:"env",Consumer_Section:"consumer",User_Section:"user",Transaction_Section:"trn",Experiment_Section:"exp",Component_Section:"env.com",CAMPAIGN_ID:"CAMPAIGN_ID",VARIATION_ID:"VARIATION_ID"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(1),o=c(n(3)),s=c(n(2)),u=c(n(0)),l=c(n(7));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"getDefaultObjectForConfigurationsForUNCTrayForAnalytics",value:function(){var e={xApiKey:"unc-thor-service",apiKey:"unc-thor-service",source:"UNC",project:"unc-thor-service"};return e}},{key:"sendAnalyticsForReceiptOfNotification",value:function(e){u.default.debug("UNCEngine: DesktopUNCEngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification :  notification object is ",e);var t={};t.projectConfigDetails=this.getDefaultObjectForConfigurationsForUNCTrayForAnalytics();var n={},i=void 0,r=void 0,c={};n["event.type"]="receipt",n["event.subtype"]="notification",n["event.subcategory"]="Message",this.setConstantFieldsWithValues(n),e["notification-id"]&&""!==e["notification-id"]&&(n["content.id"]=e["notification-id"]),e.type&&""!==e.type&&e["sub-type"]&&""!==e["sub-type"]&&(n["content.type"]=e.type+":"+e["sub-type"]),"NEW"===e.state?n["content.status"]="unread":n["content.status"]="read";try{var d="object"===a(e.payload)?e.payload:JSON.parse(e.payload);if(e.metadata&&e.metadata["tracking-system-payload"]&&""!==e.metadata["tracking-system-payload"]){n["ans.client_payload"]=e.metadata["tracking-system-payload"],c=e.metadata["tracking-system-payload"];try{c=JSON.parse(c),Object.prototype.hasOwnProperty.call(c,l.default.CAMPAIGN_ID)&&(i=c.CAMPAIGN_ID),Object.prototype.hasOwnProperty.call(c,l.default.VARIATION_ID)&&(r=c.VARIATION_ID)}catch(e){u.default.warn("UNCEngine: DesktopUNCEngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification : metadata parsing failed with error : ",e)}}if(d["tracking-system-payload"]&&""!==d["tracking-system-payload"]){n["ans.client_payload"]=d["tracking-system-payload"],c=d["tracking-system-payload"];try{c=JSON.parse(c),Object.prototype.hasOwnProperty.call(c,l.default.CAMPAIGN_ID)&&(i=c.CAMPAIGN_ID),Object.prototype.hasOwnProperty.call(c,l.default.VARIATION_ID)&&(r=c.VARIATION_ID)}catch(e){u.default.warn("UNCEngine: DesktopUNCEngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification : tracking payload parsing failed with error :",e)}}}catch(e){u.default.warn("UNCEngine: DesktopUNCEngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification: Error in payload parsing")}i&&(n["exp.campaign_id"]=i),r&&(n["exp.variation_id"]=r),u.default.debug("UNCEngine: DesktopUNCEngineAnalyticsHandler: sendAnalyticsForReceiptOfNotification: sending event is: ",n),t.data=n,s.default.sendMessageToApplet("SendAnalytics",t,o.default.ANALYTICS_DESKTOP_TARGET_ID)}},{key:"sendAnalyticsForUserPreferenceForAnalytics",value:function(e,t){var n={};n.projectConfigDetails=this.getDefaultObjectForConfigurationsForUNCTrayForAnalytics();var i={"event.type":"click","event.subcategory":"Privacy Notice"};if(i["event.subtype"]=e?"opt-in":"opt-out",t&&(i["event.value"]=t),r.GlobalData.context.analyticsConfig&&r.GlobalData.context.analyticsConfig.evidonDetails&&"object"===a(r.GlobalData.context.analyticsConfig.evidonDetails))for(var u=Object.keys(r.GlobalData.context.analyticsConfig.evidonDetails),c=0;c<u.length;c+=1){var d=u[c];-1!==l.default.Evidon_Supported_Keys.indexOf(d)&&("name"===d?i["env.svc.name"]=r.GlobalData.context.analyticsConfig.evidonDetails[d]:"version"===d&&(i["env.svc.version"]=r.GlobalData.context.analyticsConfig.evidonDetails[d]))}this.setConstantFieldsWithValues(i),n.data=i,s.default.sendMessageToApplet("SendAnalytics",n,o.default.ANALYTICS_DESKTOP_TARGET_ID)}},{key:"sendAnalyticsForAccessTokenExpiry",value:function(e){var t={};t.projectConfigDetails=this.getDefaultObjectForConfigurationsForUNCTrayForAnalytics();var n={"event.type":"accessTokenExpired"};n["event.value"]=e,this.setConstantFieldsWithValues(n),t.data=n,s.default.sendMessageToApplet("SendAnalytics",t,o.default.ANALYTICS_DESKTOP_TARGET_ID)}},{key:"setConstantFieldsWithValues",value:function(e){e["event.workflow"]="UNC",e["event.category"]="DESKTOP",e["source.platform"]="DESKTOP",e["source.name"]="UNC",e["source.version"]="1.0",r.GlobalData.imsClientID&&""!==r.GlobalData.imsClientID&&(e["source.client_id"]=r.GlobalData.imsClientID),r.GlobalData.imsClientID&&""!==r.GlobalData.imsClientID&&(e["consumer.client_id"]=r.GlobalData.imsClientID),r.GlobalData.productName&&""!==r.GlobalData.productName&&(e["consumer.name"]=r.GlobalData.productName),r.GlobalData.productVersion&&""!==r.GlobalData.productVersion&&(e["consumer.version"]=r.GlobalData.productVersion),e["consumer.platform"]="DESKTOP"}}]),e}();t.default=new d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(1),o=d(n(3)),s=d(n(2)),u=d(n(0)),l=d(n(8)),c=d(n(6));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"_hasOSTray",value:function(e){if(!e)return!1;try{var t=JSON.parse(e);if(t&&"object"===(void 0===t?"undefined":a(t))&&void 0!==t.ostray)return!0}catch(e){return!1}return!1}},{key:"processNotifications",value:function(e){for(var t=[],n=[],a={},i=!0,d=e.notificationResponseList.length-1;d>=0;d-=1){var f=e.notificationResponseList[d];if(0===d&&(Object.prototype.hasOwnProperty.call(f,"unread-count")&&(a.value=parseInt(f["unread-count"],10),s.default.sendMessageToApplet("UnReadNotificationsCount",a,"UNCWidget")),f["server-timestamp"])){if(!r.GlobalData.serverTimestampOnLaunch){r.GlobalData.serverTimestampOnLaunch=f["server-timestamp"];s.default.sendMessageToApplet("InitLongPoll",{},"UNCEngine")}s.default.broadcastServerTimestamp(f["server-timestamp"])}if(i&&Object.prototype.hasOwnProperty.call(f,o.default.ConfigurationKey)&&(i=!1,r.ServerConfigurationManager.setConfigParams(f[o.default.ConfigurationKey])),!e.notify)break;if(f.notifications&&f.notifications.notification)for(var h=f.notifications.notification,p=h.length-1;p>=0;p-=1){var g=h[p];try{r.GlobalData.surface&&"DESKTOP"===r.GlobalData.surface.toUpperCase()?l.default.sendAnalyticsForReceiptOfNotification(g):c.default.sendAnalyticsForReceiptOfNotification(g)}catch(e){u.default.warn("UNCEngine: NotificationProcessor: processNotifications - Error while sending receipt analytics: ",e)}t.push(g),e.notify&&this._hasOSTray(g.payload)&&n.push(g)}else u.default.warn("UNCEngine: NotificationProcessor: processNotifications - Recieved invalid notification response. Ignore processing")}if(e.notify)s.default.notifyObservers(t),n.reverse(),s.default.sendTrayNotificationData(n);else if(e.targetID){var v={};v.notifications=e.notificationResponseList[0].notifications;for(var b=v.notifications,y=0;y<b.length;y+=1){var m=b[y];if("NEW"===m.state)try{r.GlobalData.surface&&"DESKTOP"===r.GlobalData.surface.toUpperCase()?l.default.sendAnalyticsForReceiptOfNotification(m):c.default.sendAnalyticsForReceiptOfNotification(m)}catch(e){u.default.warn("UNCEngine: NotificationProcessor: processNotifications - Error while sending historical receipt analytics: ",e)}}s.default.sendMessageToApplet(e.namespace,v,e.targetID)}else if(e.callbackFn&&"function"==typeof e.callbackFn){var _={data:{notifications:e.notificationResponseList[0].notifications}};e.requestContext&&(_.requestContext=e.requestContext);try{e.callbackFn(_)}catch(e){u.default.error("UNCEngine: HostClientNotificationRequestManager: onResponse - Callback exception: ",e)}}}}]),e}();t.default=new f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={UnSupportedBrowser:-1,InsufficientMemory:-2,UnSupportedUrlScheme:-3,UnSupportedMethod:-4,UrlSchemeMissing:-5,UrlHostnameMissing:-6,MethodTypeMissing:-7,TimeoutError:-8,NetworkFailure:-9,InvalidRequest:-10,Success:1,IndexNotFound:-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(3)),r=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.timeoutFailureCount=0,this.clientFailureCount=0,this.serverFailureCount=0,this.internalNetworkFailureCount=0,this.failedState=!1}return a(e,[{key:"resetErrorTypeFailureCount",value:function(){this.timeoutFailureCount=0,this.clientFailureCount=0,this.serverFailureCount=0,this.internalNetworkFailureCount=0,this.failedState=!1}},{key:"_handleShortPollRequestFailure",value:function(e){if(!this.failedState){var t=0,n=0;switch(e){case"Timeout":this.timeoutFailureCount+=1,n=this.timeoutFailureCount,t=i.default.TimeOutErrorCountLimit;break;case"ClientFailure":this.clientFailureCount+=1,n=this.clientFailureCount,t=i.default.ClientErrorCountLimit;break;case"ServerFailure":this.serverFailureCount+=1,n=this.serverFailureCount,t=i.default.ServerErrorCountLimit;break;case"NetworkFailure":this.internalNetworkFailureCount+=1,n=this.internalNetworkFailureCount,t=i.default.InternalNetworkErrorCountLimit}n===t-1&&(r.default.warn("UNCEngine: NotificationRequestManagerErrorCountsHelper: _handleShortPollRequestFailure - ShortPoll failures of type:",e," has reached its failure count limit. Adding delay in successive ShortPolls(if failure persists)"),this.failedState=!0)}}},{key:"_handleFetchError",value:function(e){switch(e){case"Internal_Server_Error":case"Request_Not_Implemented":case"Bad_Gateway":case"Service_Unavailable":case"Gateway_Timeout":case"Server_Response_Error":this._handleShortPollRequestFailure("ServerFailure");break;case"Network_Failure":this._handleShortPollRequestFailure("NetworkFailure");break;case"Request_Timeout":this._handleShortPollRequestFailure("Timeout");break;default:this._handleShortPollRequestFailure("ClientFailure")}}}]),e}();t.default=new s},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=d(n(14)),o=d(n(18)),s=d(n(38)),u=d(n(0)),l=d(n(7)),c=d(n(2));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var h=function(){function e(){f(this,e),this._clientCallback=function(e,t){u.default.debug("UNCEngine: UNCContainer: client callback not provided or not a valid fn, namespace: ",e,", data: ",t)},this._clientNamespaces={},this._userProfile=null}return i(e,[{key:"_sendMessage",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this._ccxCore.handleMessage({targetType:n,message:e,data:t,targetID:a})}},{key:"_getUserProfile",value:function(){return this._userProfile}},{key:"_setUserProfile",value:function(e){return e?s.default.sanitizeUserProfile(e)?(this._userProfile=new s.default(e),!0):(u.default.warn("UNCEngine: UNCContainer: _setUserProfile - Input user profile sanity failed"),!1):(u.default.warn("UNCEngine: UNCContainer: _setUserProfile - Cannot set empty user profile"),!1)}},{key:"_invalidateUserProfile",value:function(){delete this._userProfile,this._userProfile=null}},{key:"_loadUI",value:function(e,t){var n={appID:e.appID,imsClientID:e.imsClientID,locale:e.locale,env:e.env,surface:e.uiConfig.surface,cssOverride:e.uiConfig.cssOverride,cssPath:e.uiConfig.cssPath,theme:e.uiConfig.theme,tabIndex:e.uiConfig.tabIndex,el:e.uiConfig.el,analyticsConfig:e.analyticsConfig,parentSpectrumProvider:e.uiConfig.parentSpectrumProvider};if(e.uiConfig&&e.uiConfig.hostCallBackFn&&(n.hostCallBackFn=e.uiConfig.hostCallBackFn),e.uiConfig&&e.uiConfig.onUNCWidgetReady&&(n.onUNCWidgetReady=e.uiConfig.onUNCWidgetReady),e.imageIcon&&(n.imageIcon=e.imageIcon),e.uiConfig&&e.uiConfig.imageIcon&&(n.imageIcon=e.uiConfig.imageIcon),e.analyticsEnabled?n.analyticsEnabled=e.analyticsEnabled:n.analyticsEnabled=!1,e.notificationUpdateCallbackFn&&(n.notificationUpdateCallbackFn=e.notificationUpdateCallbackFn),e.notificationsListener){var a=e.notificationsListener;a&&a.data&&a.data.callbackFn&&"function"==typeof a.data.callbackFn&&a.data.observersList&&a.data.observersList.length>0&&c.default.registerObserver(a)}e.deviceType&&(n.deviceType=e.deviceType);var i={id:"UNCWidget",version:"1.0"};"stage"===e.env.toLowerCase()||"stg"===e.env.toLowerCase()?(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?i.path=l.default.STAGE_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget-shared.js":i.path=l.default.STAGE_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget.js",i.cssPath=l.default.STAGE_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget.css"):"dev"===e.env.toLowerCase()?(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?i.path=l.default.DEV_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget-shared.js":i.path=l.default.DEV_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget.js",i.cssPath=l.default.DEV_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget.css"):"qe"===e.env.toLowerCase()?(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?i.path=l.default.QE_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget-shared.js":i.path=l.default.QE_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget.js",i.cssPath=l.default.QE_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget.css"):"local"===e.env.toLowerCase()?(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?i.path="http://localhost:8080/UNCWidget-shared.js":i.path="http://localhost:8080/UNCWidget.js",i.cssPath="http://localhost:8080/UNCWidget.css"):(e.uiConfig&&!0===e.uiConfig.useUtilnavSharedComponents?i.path=l.default.PROD_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget-shared.js":i.path=l.default.PROD_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget.js",i.cssPath=l.default.PROD_BASE_PATH+"/"+l.default.PATH_PARAM+"/"+l.default.VERSION_PARAM+"/UNCWidget.css");var r=Object.assign({},i,{initData:{},statusCallback:function(t){t.status?(u.default.debug("UNCEngine: UNCContainer: _loadUI - success returned in loading UNCWIdget"),this._sendMessage("InitContext",n,"Applet","UNCWidget"),u.default.debug("UNCEngine: UNCContainer: _loadUI - Initializing UNCWidget with context: ",n),this._loadBL(e)):u.default.debug("UNCEngine: UNCContainer: _loadUI - error returned in loading UNCWIdget")}.bind(this),panels:void 0});this._sendMessage("LoadModule",r,"JSCore")}},{key:"_loadBL",value:function(e){var t={id:"UNCEngine",moduleObject:new o.default,initData:""};this._sendMessage("RegisterModule",t,"JSCore"),this._sendMessage("InitContext",e,"Applet","UNCEngine")}},{key:"initialize",value:function(e){if(e&&e.initJSON&&"object"===a(e.initJSON)){this._ccxCore=e.hostObject;var t=e.initJSON.applicationContext;t.namespaces&&"object"===a(t.namespaces)&&(this._clientNamespaces=t.namespaces),e.initJSON.callback&&"function"==typeof e.initJSON.callback&&(this._clientCallback=e.initJSON.callback),t.userProfile&&"object"===a(t.userProfile)&&(this._setUserProfile(t.userProfile),delete t.userProfile),t.uiEnabled?t.uiConfig&&"object"===a(t.uiConfig)&&this._loadUI(t):this._loadBL(t)}}},{key:"handleMessage",value:function(e){var t=e.message;switch(t){case"ShowOSTray":u.default.debug("UNCEngine: UNCContainer: handleMessage: ShowOSTray - Calling client callback with namespace '",this._clientNamespaces[t],"'");try{this._clientCallback(this._clientNamespaces[t],e.data)}catch(e){u.default.debug("UNCEngine: UNCContainer: handleMessage: ShowOSTray - Exception in calling client callback",e)}return;case"UpdateBadge":u.default.debug("UNCEngine: UNCContainer: handleMessage: UpdateBadge - Calling client callback with namespace '",this._clientNamespaces[t],"'");try{this._clientCallback(this._clientNamespaces[t],e.data)}catch(e){u.default.debug("UNCEngine: UNCContainer: handleMessage: ShowOSTray - Exception in calling client callback",e)}return;case"GetUserProfile":return u.default.debug("UNCEngine: UNCContainer: handleMessage: GetUserProfile - Sending userProfile Data to ",e.sourceID),this._getUserProfile();case"RefreshUserProfile":if(this._userProfile){u.default.debug("UNCEngine: UNCContainer: handleMessage: RefreshUserProfile - Recieved request from ",e.sourceID,"Invalidating existing user profile and fetching updated profile"),this._invalidateUserProfile();try{this._clientCallback(t,e.data)}catch(e){u.default.debug("UNCEngine: UNCContainer: handleMessage: ShowOSTray - Exception in calling client callback",e)}}return;default:u.default.debug("UNCEngine: UNCContainer: handleMessage: default - Calling client callback with namespace '",t,"'");try{this._clientCallback(t,e.data)}catch(e){u.default.debug("UNCEngine: UNCContainer: handleMessage: ShowOSTray - Exception in calling client callback",e)}}}},{key:"finalize",value:function(e){}},{key:"handleMessageFromInterface",value:function(e,t){switch(e){case"RegisterObservers":return void this._sendMessage("RegisterObservers",t,"Applet","UNCEngine");case"UnregisterObservers":return void this._sendMessage("UnregisterObservers",t,"Applet","UNCEngine");case"GetNotifications":return void this._sendMessage("GetNotifications",t,"Applet","UNCEngine");case"PostNotifications":return void this._sendMessage("PostNotifications",t,"Applet","UNCEngine");case"UpdateNotifications":return void this._sendMessage("UpdateNotifications",t,"Applet","UNCEngine");case"UpdateNotificationContent":return void this._sendMessage("UpdateNotificationContent",t,"Applet","UNCWidget");case"UpdateUserProfile":if(!t)return;var n=t;"string"==typeof n&&(n=JSON.parse(t)),this.userProfile&&this._invalidateUserProfile(),this._setUserProfile(n);return void this._sendMessage("UpdateUserProfile",{},"Applet","UNCEngine");case"ClearBadge":return void this._sendMessage("ClearBadge",t,"Applet","UNCEngine");case"UpdateAnalyticsConfig":return void this._sendMessage("UpdateAnalyticsConfig",t,"Applet","UNCEngine");case"ShowNotificationWidget":return void this._sendMessage("ShowNotificationWidget",t,"Applet","UNCWidget");case"HideNotificationWidget":this._sendMessage("HideNotificationWidget",t,"Applet","UNCWidget")}}}]),e}(),p=function(){function e(t){if(f(this,e),t&&t.applicationContext&&"object"===a(t.applicationContext)){u.default.debug("UNC: Initializing UNCEngine context: ",t),this._ccxCore=new r.default,this._uncContainer=new h,this._ccxCore.initialize({hostObject:function(e){u.default.warn("UNCEngine: UNC: Message received for core loader (host process), message object: ",e)}});var n={targetType:"JSCore",message:"RegisterModule",data:{id:"UNCContainer",moduleObject:this._uncContainer,initData:t}};this._ccxCore.handleMessage(n)}}return i(e,[{key:"RegisterObservers",value:function(e){this._uncContainer.handleMessageFromInterface("RegisterObservers",e)}},{key:"UnregisterObservers",value:function(e){this._uncContainer.handleMessageFromInterface("UnregisterObservers",e)}},{key:"GetNotifications",value:function(e){this._uncContainer.handleMessageFromInterface("GetNotifications",e)}},{key:"PostNotifications",value:function(e){this._uncContainer.handleMessageFromInterface("PostNotifications",e)}},{key:"UpdateNotifications",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateNotifications",e)}},{key:"UpdateNotificationContent",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateNotificationContent",e)}},{key:"UpdateUserProfile",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateUserProfile",e)}},{key:"ClearBadge",value:function(e){this._uncContainer.handleMessageFromInterface("ClearBadge",e)}},{key:"UpdateDeviceID",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateDeviceID",e)}},{key:"UpdateAnalyticsConfig",value:function(e){this._uncContainer.handleMessageFromInterface("UpdateAnalyticsConfig",e)}},{key:"ShowNotificationWidget",value:function(e){this._uncContainer.handleMessageFromInterface("ShowNotificationWidget",e)}},{key:"HideNotificationWidget",value:function(e){this._uncContainer.handleMessageFromInterface("HideNotificationWidget",e)}}]),e}();t.default=p,"development"===e.env.NODE_ENV&&n(39)}).call(t,n(13))},function(e,t,n){"use strict";var a,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(e){if(a===setTimeout)return setTimeout(e,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:o}catch(e){a=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,c=[],d=!1,f=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):f=-1,c.length&&p())}function p(){if(!d){var e=u(h);d=!0;for(var t=c.length;t;){for(l=c,c=[];++f<t;)l&&l[f].run();f=-1,t=c.length}l=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new g(e,t)),1!==c.length||d||u(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function e(t,n,a){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,a)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(a):void 0},r=u(n(15)),o=u(n(16)),s=u(n(0));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._coreMessageManager=new o.default(e),e._hostMessageHandlerFn=function(e){s.default.warn("Core: Host message handler found missing while sending message: ",e)},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),a(t,[{key:"initialize",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e),this._coreMessageManager.initialize(e)}},{key:"handleMessage",value:function(e){return this._coreMessageManager.handleMessage(e)}},{key:"finalize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"finalize",this).call(this,dataJSON)}}]),t}();t.default=l,window.CCXCore=function(){return new l}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hostObject=null,this._hostMessageHandlerFn=null}return i(e,[{key:"initialize",value:function(e){e&&"object"==(void 0===e?"undefined":a(e))&&(e.hostObject&&"object"==a(e.hostObject)&&(this._hostObject=e.hostObject),e.hostMessageHandlerFn&&"function"==typeof e.hostMessageHandlerFn&&(this._hostMessageHandlerFn=e.hostMessageHandlerFn))}},{key:"handleMessage",value:function(e){}},{key:"finalize",value:function(e){}},{key:"sendMessage",value:function(e){return this._hostObject&&this._hostObject.handleMessage&&"function"==typeof this._hostObject.handleMessage?this._hostObject.handleMessage(e):this._hostMessageHandlerFn?this._hostMessageHandlerFn(e):void 0}},{key:"sendMessageToJSCore",value:function(e,t){return this.sendMessage({targetType:"JSCore",message:e,data:t||{}})}},{key:"sendMessageToParent",value:function(e,t){return this.sendMessage({targetType:"Parent",message:e,data:t||{}})}},{key:"sendMessageToHost",value:function(e,t){return this.sendMessage({targetType:"Host",message:e,data:t||{}})}},{key:"sendMessageToContainer",value:function(e,t){return this.sendMessage({targetType:"Container",message:e,data:t||{}})}},{key:"sendMessageToApplet",value:function(e,t,n,a,i){return this.sendMessage({targetType:"Applet",targetID:n||"",targetVersion:a||"",targetInstanceID:i||"",message:e,data:t||{}})}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=s(n(17)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ccxCoreObj=t,this._loadingModules=new Map,this._loadedModules=new Map,this._loadedCoreExtensions=new Map,this._moduleRoleMap=new Map}return i(e,[{key:"initialize",value:function(e){if(e.coreExtensionList){var t=!0,n=!1,a=void 0;try{for(var i,r=e.coreExtensionList[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value;this.loadCoreExtension(o)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"handleMessage",value:function(e){var t=this;if("JSCore"==e.targetType)return this.handleMessageForJSCore(e);if("Host"==e.targetType)return this.sendMessageToHost(e);if("Parent"==e.targetType)return this.sendMessageToAppletParent(e);if("*"==e.targetID)this.broadcastMessage(e);else{if("CoreExt"==e.targetType)return this.sendMessageToCoreExt(e);if("Applet"==e.targetType)return this.sendMessageToApplet(e);if(this._moduleRoleMap.has(e.targetType)){if(void 0!=e.isAsync&&!e.isAsync)return this._moduleRoleMap.get(e.targetType).handleMessage(e);setTimeout(function(){t._moduleRoleMap.get(e.targetType).handleMessage(e)},0)}else this.sendMessageToHost(e)}return!0}},{key:"handleMessageForJSCore",value:function(e){var t=e.message;if("LoadModule"==t){var n=new r.default(e.data,e.sourceID,e.sourceVersion,e.sourceInstanceID,this._ccxCoreObj);return this.loadModule(n,e.data),!0}if("RegisterModule"==t){var a=new r.default(e.data,e.sourceID,e.sourceVersion,e.sourceInstanceID,this._ccxCoreObj);return!!a.register(e.data.moduleObject,e.data)&&(this._loadedModules.set(a._id,a),a._role&&this._moduleRoleMap.set(a._role,a),this._registerModuleWithNativeCore(a),!0)}if("UnloadModule"==t||"UnregisterModule"==t)return!this._loadedModules.has(e.data.id)||this._loadedModules.delete(e.data.id)}},{key:"loadModule",value:function(e,t){this._loadingModules.set(e._id,e),e.load(t,function(n){if(this._loadingModules.delete(e._id),n.status&&(this._loadedModules.set(e._id,e),e._role&&this._moduleRoleMap.set(e._role,e),this._registerModuleWithNativeCore(e)),t.statusCallback){if("function"==typeof t.statusCallback)try{t.statusCallback(n)}catch(e){o.default.error("CoreMessageManager: Exception in onLoad callback: ",e)}else if("string"==typeof t.statusCallback)try{this.sendMessageToHost({targetType:"Host",message:t.statusCallback,data:n})}catch(e){o.default.error("CoreMessageManager: Exception in onLoad callback: ",e)}}else o.default.warn("CoreMessageManager: onLoad callback not present.")}.bind(this))}},{key:"loadCoreExtension",value:function(e){var t=new r.default(e,"","","",this._ccxCoreObj);this._loadingModules.set(t._id,t),t.load({},function(e){this._loadingModules.delete(t._id),e.status&&this._loadedCoreExtensions.set(t._id,t)}.bind(this))}},{key:"_registerModuleWithNativeCore",value:function(e){this.sendMessageToHost({targetType:"Core",message:"RegisterApplet",data:{type:e._type,id:e._id,version:e._version,instanceID:e._instanceID,path:e._path}})}},{key:"sendMessageToHost",value:function(e){var t=this;return void 0!=e.isInterCoreMsg&&e.isInterCoreMsg?o.default.warn("CoreMessageManager: Not sending interCoreMsg back to host. Message: ",e):(e.isInterCoreMsg=!0,setTimeout(function(){t._ccxCoreObj._hostMessageHandlerFn(e)},0)),!0}},{key:"sendMessageToAppletParent",value:function(e){var t=this,n=this._loadedModules.get(e.sourceID).getParent();if(n){if(this._loadedModules.has(n)){if(void 0!=e.isAsync&&!e.isAsync)return this._loadedModules.get(n).handleMessage(e);setTimeout(function(){t._loadedModules.get(n).handleMessage(e)},0)}}else this.sendMessageToHost(e);return!0}},{key:"broadcastMessage",value:function(e){if("CoreExt"==e.targetType||"*"==e.targetType||"**"==e.targetType){var t=!0,n=!1,i=void 0;try{for(var r,o=function(){var t=a(r.value,2),n=t[0],i=t[1];n!==e.sourceID&&setTimeout(function(){i.handleMessage(e)},0)},s=this._loadedCoreExtensions[Symbol.iterator]();!(t=(r=s.next()).done);t=!0)o()}catch(e){n=!0,i=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}}if("Applet"==e.targetType||"*"==e.targetType||"**"==e.targetType){var u=!0,l=!1,c=void 0;try{for(var d,f=function(){var t=a(d.value,2),n=t[0],i=t[1];n!==e.sourceID&&setTimeout(function(){i.handleMessage(e)},0)},h=this._loadedModules[Symbol.iterator]();!(u=(d=h.next()).done);u=!0)f()}catch(e){l=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw c}}}"Remote"!=e.targetType&&"**"!=e.targetType||this.sendMessageToHost(e)}},{key:"sendMessageToCoreExt",value:function(e){var t=this;if(this._loadedCoreExtensions.has(e.targetID)){if(void 0!=e.isAsync&&!e.isAsync)return this._loadedCoreExtensions.get(e.targetID).handleMessage(e);setTimeout(function(){t._loadedCoreExtensions.get(e.targetID).handleMessage(e)},0)}else this._loadingModules.has(e.targetID)?o.default.error("CoreMessageManager: Cannot send message to CoreExt during loading state. Message: ",e):this.sendMessageToHost(e);return!0}},{key:"sendMessageToApplet",value:function(e){var t=this;if(this._loadedModules.has(e.targetID)){if(void 0!=e.isAsync&&!e.isAsync)return this._loadedModules.get(e.targetID).handleMessage(e);setTimeout(function(){t._loadedModules.get(e.targetID).handleMessage(e)},0)}else this._loadingModules.has(e.targetID)?o.default.error("CoreMessageManager: Cannot send message to Applet during loading state. Message: ",e):this.sendMessageToHost(e);return!0}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(t,n){o(this,e),this._originalCoreObj=n,this._moduleObj=t}return i(e,[{key:"initialize",value:function(e){this._originalCoreObj(e)}},{key:"handleMessage",value:function(e){return e.sourceID||(e.sourceID=this._moduleObj._id),e.sourceVersion||(e.sourceVersion=this._moduleObj._version),e.sourceInstanceID||(e.sourceInstanceID=this._moduleObj._instanceID),e.isAsync=void 0==e.isAsync||e.isAsync,e.enableLog=void 0==e.enableLog||e.enableLog,e.sendViaMainThread=void 0!=e.sendViaMainThread&&e.sendViaMainThread,this._originalCoreObj.handleMessage(e)}},{key:"finalize",value:function(e){this._originalCoreObj.finalize(e)}}]),e}(),u=function(){function e(t,n,a,i,r){o(this,e),this._type=t.type,this._id=t.id,this._version=t.version,this._instanceID=t.instanceID,this._path=t.path,this._csspath=t.cssPath,this._role=t.role,this._dictionaryPath=t.dictionaryPath,this._parentID=n||"",this._parentVersion=a||"",this._parentInstanceID=i||"",this._instanceID||(this._instanceID=this._parentInstanceID),this._object=null,this._isLoaded=!1,this._coreObj=new s(this,r),this._originalCoreObj=r}return i(e,[{key:"getParent",value:function(){return this._parentID}},{key:"register",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r.default.debug("CoreModule: Successfully loaded Module '",this._id,"'"),!(e&&"object"==(void 0===e?"undefined":a(e))&&e.initialize&&"function"==typeof e.initialize&&e.handleMessage&&"function"==typeof e.handleMessage&&e.finalize&&"function"==typeof e.finalize))return!1;this._object=e,this._isLoaded=!0;var i={hostObject:this._coreObj,type:this._type,id:this._id,version:this._version,instanceID:this._instanceID,path:this._path,initJSON:t.initData,dictionary:n};return!1!==this._object.initialize(i)}},{key:"getLocalizationStrings",value:function(e,t,n){var a=this._dictionaryPath+"/"+e+".json",i=new XMLHttpRequest;i.open("GET",a),i.onload=function(){"number"==typeof i.status&&i.status<400?t(JSON.parse(i.response)):(r.default.warn("Non-success code: "+i.status+" in loading localization strings for locale "+e),n())}.bind(this),i.onerror=function(){r.default.warn("Error in loading localization strings for locale "+e),n()}.bind(this),i.send()}},{key:"load",value:function(e,t){var n=this;if("OldApplet"!=this._type){var a=!this._dictionaryPath,i=null,o=null,s=document.createElement("script");if(s.type="text/javascript",s.src=this._path,s.onload=function(s){try{i=window[n._id]()}catch(s){r.default.error("Core: Module load exception: ",s,", messageData: ",e)}if(i){if(!0&&a){var u=n.register(i,e,o);t({status:u})}}else t({status:!1})},s.onerror=function(e){r.default.error("CoreModule: Error loading Module '",n._id,"': ",e),t({status:!1})},this._dictionaryPath&&this.getLocalizationStrings(e.locale,function(r){if(a=!0,o=r,i){var s=n.register(i,e,o);t({status:s})}},function(){if(a=!0,i){var r=n.register(i,e);t({status:r})}}),document.head.appendChild(s),this._csspath){var u=document.createElement("link");u.setAttribute("rel","stylesheet"),u.setAttribute("type","text/css"),u.href=this._csspath,document.head.appendChild(u)}return!0}this.loadOld(e,t)}},{key:"getEntity",value:function(){var e=new(window.Backbone.Model.extend({defaults:{id:this.oldAppletId,parentId:"",filePath:this._path,header:{targetID:this._id,targetVersion:"1.0",targetInstanceID:"1",sourceID:this._id.replace("_UI","_BL"),sourceVersion:"1.0",sourceInstanceID:"1"},order:0,isVisible:!1,isLoaded:!1,type:"panel",localizedName:"",children:[],needsAttention:!1,showBadge:!1,panelTab:null},setTab:function(e){e&&this.set("panelTab",e)}}));return e.on("change:localizedName",function(){this.moduleObj._originalCoreObj.handleMessage({targetType:"Applet",targetID:"JSContainer_UI",targetVersion:"1.0",message:"UpdatePanelDisplayName",data:{panelName:this.moduleObj._id,displayName:this.entity.attributes.localizedName}})},{entity:e,moduleObj:this}),e}},{key:"loadOld",value:function(e,t){this.oldAppletId=e.initData.divId;var n=this.getEntity();window.ccxCoreObj||(window.ccxCoreObj=this._originalCoreObj),window.require([this._path],function(e){r.default.info("JSCore: Old module loaded: ",n),e.registerMe(n),n.set("isLoaded",!0),t({status:!0})},function(e){r.default.error("JSCore: Old module load failed: ",e," entity: ",n),t({status:!1})})}},{key:"handleMessage",value:function(e){if("OldApplet"==this._type){var t=this.oldAppletId;return window.require(["interface/events"],function(n){var a=e;e.dataInXmlData?(a.xmlData={},a.xmlData.data=a.data):a.xmlData=a.data,delete e.dataInXmlData;try{n.trigger(t,{msg:a,type:e.message})}catch(e){r.default.error("JSCore: Exception in old Applet message trigger: ",e)}}),!0}return!(!this._object||!this._object.handleMessage||"function"!=typeof this._object.handleMessage)&&this._object.handleMessage(e)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=p(n(4)),r=n(1),o=p(n(2)),s=p(n(28)),u=p(n(31)),l=p(n(5)),c=p(n(3)),d=p(n(0)),f=p(n(6)),h=p(n(37));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var v={__PAUSE__:0,__INIT__:1,__SYNC_TIMESTAMP__:2,__LOAD_UI__:3,__INIT_LONGPOLL__:4,__RESUME__:5,__NIL__:6},b=function(){function e(t){g(this,e),this._STATE=v.__PAUSE__,this._ccxCore=t,o.default.setClientCallback(this._ccxCore.handleMessage.bind(this._ccxCore))}return a(e,[{key:"_validateContext",value:function(){return!!this._context}},{key:"initContext",value:function(e){this._context=e,this._validateContext()?r.GlobalContext.initialize(this._context):d.default.error("UNCEngine: EngineManager: initContext: Context validation failed.....")}},{key:"setState",value:function(e){this._STATE=e,this.executeStateMachine(),d.default.debug("UNCEngine: EngineManager: setState - ",this._STATE)}},{key:"getState",value:function(){return this._STATE}},{key:"getFutureNotificationsObj",value:function(){return this._futureNotificationsObj}},{key:"addRequestInQueue",value:function(e){this.requestQueue||(this.requestQueue=[]);var t=Object.assign({},e);t.targetID="UNCEngine",t.targetType="Applet",this.requestQueue.push(t)}},{key:"executeStateMachine",value:function(){var e=this;setTimeout(function(){switch(e._STATE){case v.__INIT__:return e._validateContext()?(d.default.debug("UNCEngine: EngineManager: executeStateMachine: __INIT__ - GlobalData initialized: ",r.GlobalData),void e.setState(v.__SYNC_TIMESTAMP__)):void d.default.error("UNCEngine: EngineManager: executeStateMachine: __INIT__ - Context validation failed.....");case v.__SYNC_TIMESTAMP__:var t=l.default.createNotificationGetRequest(r.ServerConfigurationManager.serverShortPollUri);return t?(t.request.responseCallback=function(e){var t=this,n=JSON.parse(e);Object.prototype.hasOwnProperty.call(n,c.default.ConfigurationKey)&&r.ServerConfigurationManager.setConfigParams(n[c.default.ConfigurationKey]),o.default.broadcastServerTimestamp(n["server-timestamp"]);try{this._context&&this._context.onReady&&"function"==typeof this._context.onReady&&setTimeout(function(){t._context.onReady()},0)}catch(e){d.default.warn("UNCEngine: EngineManager: executeStateMachine: __LOAD_UI__ - Some exception occured while calling host callback",e)}this.setState(v.__LOAD_UI__)}.bind(e),t.request.errorCallback=function(e){var t=this;d.default.error("Network error: ",e);try{this._context&&this._context.onReady&&"function"==typeof this._context.onReady&&setTimeout(function(){t._context.onReady()},0)}catch(e){d.default.warn("UNCEngine: EngineManager: executeStateMachine: __LOAD_UI__ - Some exception occured while calling host callback",e)}this.setState(v.__LOAD_UI__)}.bind(e),void new i.default(t.request).SendRequest(t.requestData)):(d.default.warn("UNCEngine: EngineManager: executeStateMachine: __SYNC_TIMESTAMP__ - Unable to create httpRequest. Either AccessToken or AppID is not valid"),void e.setState(v.__LOAD_UI__));case v.__LOAD_UI__:return"desktop"!==r.GlobalData.surface&&e._ccxCore.handleMessage({targetType:"Applet",targetID:"UNCWidget",message:"Init",data:{}}),void(r.GlobalData.serverTimestampOnLaunch?e.setState(v.__INIT_LONGPOLL__):e.setState(v.__RESUME__));case v.__INIT_LONGPOLL__:return e._futureNotificationsObj||("desktop"===r.GlobalData.surface?e._futureNotificationsObj=new u.default(["devicePush","poll"]):e._futureNotificationsObj=new u.default(["webPush","poll"]),e._futureNotificationsObj.executeRequest()),void e.setState(v.__RESUME__);case v.__RESUME__:if(e._futureNotificationsObj&&e._futureNotificationsObj.resumeRequest(),e.requestQueue){for(var n=0;n<e.requestQueue.length;n+=1)e._ccxCore.handleMessage(e.requestQueue[n]);delete e.requestQueue,e.requestQueue=null}e.setState(v.__NIL__)}},1)}}]),e}(),y=function(){function e(){g(this,e)}return a(e,[{key:"initialize",value:function(e){this._ccxCore=e.hostObject,this._manager=new b(this._ccxCore)}},{key:"handleMessage",value:function(e){var t=e.message;if("InitContext"!==t&&"UpdateUserProfile"!==t&&"RefreshUserProfile"!==t&&this._manager.getState()<v.__LOAD_UI__)this._manager.addRequestInQueue(e);else switch(t){case"InitContext":var n=e.data;return d.default.debug("UNCEngine: handleMessage: Initializing UNCEngine context: ",n),this._manager.initContext(n),void this._manager.setState(v.__INIT__);case"RefreshUserProfile":return void(this._manager.getState()!==v.__PAUSE__&&(d.default.debug("UNCEngine: handleMessage: RefreshUserProfile"),o.default.sendMessageToParent("RefreshUserProfile"),this._manager.setState(v.__PAUSE__)));case"UpdateUserProfile":return d.default.debug("UNCEngine: handleMessage: UpdateUserProfile"),void this._manager.setState(v.__RESUME__);case"RegisterObservers":return d.default.debug("UNCEngine: handleMessage: Registering observers - ",e),!!o.default.registerObserver(e);case"UnregisterObservers":return d.default.debug("UNCEngine: handleMessage: Unregistering observers - ",e),!!o.default.unregisterObserver(e);case"GetNotifications":return d.default.debug("UNCEngine: handleMessage: GetNotifications - ",e),(new s.default).getNotifications(e);case"PostNotifications":return d.default.debug("UNCEngine: handleMessage: PostNotifications - ",e),(new s.default).postNotifications(e);case"UpdateNotifications":return d.default.debug("UNCEngine: handleMessage: UpdateNotifications - ",e),(new s.default).updateNotifications(e);case"ClearBadge":return d.default.debug("UNCEngine: handleMessage: ClearBadge"),(new s.default).clearBadge(e);case"GetConfigurationSettings":return d.default.debug("UNCEngine: handleMessage: GetConfigurationSettings"),void r.ServerConfigurationManager.serveNotificationConfigurationRequest(e);case"UpdateAnalyticsConfig":if(d.default.debug("UNCEngine: handleMessage: UpdateAnalyticsConfig"),void 0!==e.data.analyticsEnabled){var a="true"===e.data.analyticsEnabled.toString().toLowerCase();a?(r.GlobalData.analyticsEnabled=a,f.default.sendAnalyticsForUserPreferenceForAnalytics(!0,"update")):f.default.sendAnalyticsForUserPreferenceForAnalytics(!1,"update"),o.default.sendUpdateAnalyticsConfigToWidget(e.data)}return;case"InitLongPoll":return d.default.debug("UNCEngine: handleMessage: InitLongPoll"),void this._manager.setState(v.__INIT_LONGPOLL__);case"UpdateMachineDeviceToken":d.default.debug("UNCEngine: handleMessage: UpdateMachineDeviceToken");var i=e.data.machineDeviceToken;if(i){if(r.GlobalData.machineDeviceToken=i,!r.GlobalData.isDevicePushEnabled)return void d.default.debug("UNCEngine: handleMessage: UpdateMachineDeviceToken device push not enabled");this._manager.getFutureNotificationsObj()&&(d.default.debug("UNCEngine: handleMessage: UpdateMachineDeviceToken going to check if device on longpoll"),this._manager.getFutureNotificationsObj().isCurrentCommunicationHandlerDevicePush()?this._manager.getFutureNotificationsObj().registerDevice():this._manager.getFutureNotificationsObj().switchToDevicePush())}return;case"DisableDevicePush":return d.default.debug("UNCEngine: handleMessage: DisableDevicePush"),r.GlobalData.isDevicePushEnabled=!1,e.data.pushDeviceID&&(r.GlobalData.pushDeviceID=e.data.pushDeviceID),void(this._manager.getFutureNotificationsObj()&&this._manager.getFutureNotificationsObj().switchToLongPoll());case"EnableDevicePush":return d.default.debug("UNCEngine: handleMessage: ",t),e.data.pushDeviceID&&(r.GlobalData.pushDeviceID=e.data.pushDeviceID),e.data.machineDeviceToken&&(d.default.debug("UNCEngine: handleMessage: MachineDeviceToken got machineDeviceToken"),r.GlobalData.machineDeviceToken===e.data.machineDeviceToken?d.default.debug("UNCEngine: handleMessage: MachineDeviceToken device token is same as previous one ignoring this msg"):r.GlobalData.machineDeviceToken=e.data.machineDeviceToken),r.GlobalData.machineDeviceToken||"macos"!==r.GlobalData.platform?(r.GlobalData.isDevicePushEnabled=!0,e.data.ChannelURI&&(d.default.info("UNCEngine: EnableDevicePush ChannelURI received",e.data.ChannelURI),r.GlobalData.context.ChannelURInew=e.data.ChannelURI,d.default.info("UNCEngine: GlobalData after is ",r.GlobalData)),void(this._manager.getFutureNotificationsObj()&&this._manager.getFutureNotificationsObj().switchToDevicePush())):void d.default.debug("UNCEngine: handleMessage: MachineDeviceToken is empty");case"NetworkIsOnline":case"FetchNotifications":return d.default.debug("UNCEngine: handleMessage: ",t),void(this._manager.getFutureNotificationsObj()&&(this._manager.getFutureNotificationsObj().fetchDevicePushNotifications(e.data),this._manager.getFutureNotificationsObj().forceNotificationsFetchIfLongpoll()));case"SignedOut":return d.default.debug("UNCEngine: handleMessage: SignedOut"),void(this._manager.getFutureNotificationsObj()&&this._manager.getFutureNotificationsObj().finalize());case"SigningOut":return d.default.debug("UNCEngine: handleMessage: SigningOut"),void(this._manager.getFutureNotificationsObj()&&this._manager.getFutureNotificationsObj().cancelRequest());case"GetNotificationPreference":return d.default.info("UNCEngine: handleMessage: GetNotificationPreference"),void h.default.getPreference(e.data);case"SetNotificationPreference":return d.default.info("UNCEngine: handleMessage: SetNotificationPreference"),void h.default.setPreference(e.data);default:d.default.debug("UNCEngine: handleMessage: default - Triggering default action.....")}}},{key:"finalize",value:function(e){}}]),e}();t.default=y,window.UNCEngine=function(){return new y}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=c(n(20)),o=c(n(21)),s=c(n(10)),u=c(n(22)),l=c(n(0));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._errorObject={statusCode:0,errorCode:""},t?(this.networkRequestObj=t,this._setNetworkRequestScheme()):(this._errorObject.statusCode=s.default.InvalidRequest,this.onError(this._errorObject))}return i(e,[{key:"sendRequest",value:function(e){this._errorObject.statusCode<0?l.default.warn("Skynet: NetworkCommunicatorImpl: sendRequest - Request failed to create(Error Code: ",this._errorObject.errorCode,"). Ignoring request"):(this._setRequestData(e),this._handleRequest(this.networkRequestObj.scheme))}},{key:"getResponseHeaders",value:function(){if(this.currentRequestObj)return this.currentRequestObj.getResponseHeaders()}},{key:"cancelRequest",value:function(){this.currentRequestObj&&this.currentRequestObj.cancelRequest()}},{key:"_setNetworkRequestScheme",value:function(){if(!this.networkRequestObj.scheme){var e=this.networkRequestObj.hostname;e&&-1!=e.indexOf("://")&&(this.networkRequestObj.scheme=e.split("://")[0])}this.networkRequestObj.scheme||(this._errorObject.statusCode=s.default.UrlSchemeMissing,this.onError(this._errorObject))}},{key:"_setRequestData",value:function(e){e.queryParams&&(this.networkRequestObj.queryParams=e.queryParams),e.requestHeaders&&(this.networkRequestObj.requestHeaders=e.requestHeaders),e.timeoutInSec&&(this.networkRequestObj.timeoutInSec=e.timeoutInSec),e.content&&(this.networkRequestObj.content=e.content),e.responseType&&(this.networkRequestObj.responseType=e.responseType)}},{key:"_sanityCheck",value:function(){return this.networkRequestObj.scheme&&"string"==typeof this.networkRequestObj.scheme?this.networkRequestObj.hostname&&"string"==typeof this.networkRequestObj.hostname?this.networkRequestObj.methodType&&"string"==typeof this.networkRequestObj.methodType?(this.networkRequestObj.port&&"string"==typeof this.networkRequestObj.port||(this.networkRequestObj.port=""),this.networkRequestObj.path&&"string"==typeof this.networkRequestObj.path||(this.networkRequestObj.path=""),this.networkRequestObj.content&&"string"==typeof this.networkRequestObj.content||(this.networkRequestObj.content=""),this.networkRequestObj.queryParams&&"object"===a(this.networkRequestObj.queryParams)||(this.networkRequestObj.queryParams={}),this.networkRequestObj.requestHeaders&&"object"===a(this.networkRequestObj.requestHeaders)||(this.networkRequestObj.requestHeaders={}),this.networkRequestObj.timeoutInSec&&"number"==typeof this.networkRequestObj.timeoutInSec||(this.networkRequestObj.timeoutInSec=0),this.networkRequestObj.responseCallback&&"function"==typeof this.networkRequestObj.responseCallback||(this.networkRequestObj.responseCallback=function(){}),this.networkRequestObj.errorCallback&&"function"==typeof this.networkRequestObj.errorCallback||(this.networkRequestObj.errorCallback=function(){}),s.default.Success):(l.default.debug("Skynet: NetworkCommunicatorImpl: _sanityCheck - Request methodType(HEAD/GET/POST/PUT/DELETE) is missing. Ignoring request"),s.default.MethodTypeMissing):(l.default.debug("Skynet: NetworkCommunicatorImpl: _sanityCheck - Url hostname is missing. Ignoring request"),s.default.UrlHostnameMissing):(l.default.debug("Skynet: NetworkCommunicatorImpl: _sanityCheck - Url scheme is missing. Ignoring request"),s.default.UrlSchemeMissing)}},{key:"_handleRequest",value:function(e){l.default.debug("Skynet: NetworkCommunicatorImpl: _handleRequest -  Handling request.....");var t=this._sanityCheck(),n={};if(t!=s.default.Success)return n.statusCode=t,void this.onError(n);switch(e){case"wss":case"ws":this._handleWebSocketRequest();break;case"https":case"http":this._handleHttpRequest();break;default:n.statusCode=s.default.UnSupportedUrlScheme,this.onError(n)}}},{key:"_addCommonRequestParameters",value:function(){this.currentRequestObj.requestHeaders=this.networkRequestObj.requestHeaders,this.currentRequestObj.methodType=this.networkRequestObj.methodType,this.currentRequestObj.content=this.networkRequestObj.content,this.currentRequestObj.responseCallback=this.networkRequestObj.responseCallback,this.currentRequestObj.errorCallback=this.onError.bind(this),this.networkRequestObj.responseType&&""!==this.networkRequestObj.responseType&&(this.currentRequestObj.responseType=this.networkRequestObj.responseType)}},{key:"_handleWebSocketRequest",value:function(){var e={};e.statusCode=s.default.UnSupportedUrlScheme,this.onError(e)}},{key:"_handleHttpRequest",value:function(){if(this.currentRequestObj=new r.default,!this.currentRequestObj){l.default.debug("Skynet: NetworkCommunicatorImpl: _handleHttpRequest - Cannot create HttpCommunicator instance");var e={};return e.statusCode=s.default.InsufficientMemory,void this.onError(e)}this._addCommonRequestParameters(),this.currentRequestObj.url=u.default.createUrl(this.networkRequestObj.scheme,this.networkRequestObj.hostname,this.networkRequestObj.port,this.networkRequestObj.path,this.networkRequestObj.queryParams),this.currentRequestObj.timeout=1e3*this.networkRequestObj.timeoutInSec,this.currentRequestObj.sendRequest()}},{key:"onError",value:function(e){delete this.currentRequestObj,this._errorObject.statusCode=e.statusCode,this._errorObject.errorCode=o.default.getErrorCode("https",e.statusCode);try{this.networkRequestObj.errorCallback&&this.networkRequestObj.errorCallback(this._errorObject)}catch(e){l.default.error("Skynet: NetworkCommunicatorImpl: onError - Caught exception inside calling client's error callback. Exception: ",e," Exception Message ",e.message)}}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(10)),r=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._errorObject={statusCode:0}}return a(e,[{key:"_sanityCheck",value:function(){return["HEAD","GET","POST","PUT","DELETE"].indexOf(this.methodType)>i.default.IndexNotFound?i.default.Success:(r.default.debug("Skynet: HttpRequestHandler - HTTP Request Method ",this.methodType," is not supported!!"),i.default.UnSupportedMethod)}},{key:"_setRequestHeaders",value:function(){if(r.default.debug("Skynet: HttpRequestHandler: _setRequestHeaders - Inside SetRequest Headers"),this.requestHeaders)for(var e in r.default.debug("Skynet: HttpRequestHandler: _setRequestHeaders - Request Headers",this.requestHeaders),this.requestHeaders)this.httpRequest.setRequestHeader(e,this.requestHeaders[e])}},{key:"getResponseHeaders",value:function(){var e={};if(this.httpRequest){var t=this.httpRequest.getAllResponseHeaders();if(r.default.debug(t),!t)return e;if(-1!==t.indexOf("\r"))for(var n=t.split("\r"),a=0,i=n.length;a<i;a++){var o=n[a];-1!==o.indexOf("\n")?this._addHeadersFromStringByNewlineSeparation(o,e):this._addKeyValuePairs(o,e)}else-1!==t.indexOf("\n")?this._addHeadersFromStringByNewlineSeparation(t,e):this._addKeyValuePairs(t,e)}return e}},{key:"_addHeadersFromStringByNewlineSeparation",value:function(e,t){if(e&&""!==e)for(var n=e.split("\n"),a=0,i=n.length;a<i;a++){var r=n[a];r&&""!==r&&this._addKeyValuePairs(r,t)}}},{key:"_addKeyValuePairs",value:function(e,t){if(e&&""!==e&&-1!==e.indexOf(":")){var n=e.split(":"),a=n[0];if(a&&""!==a){a=a.trim();var i=n[1];i&&""!==i&&(i=i.trim(),t[a]=i)}}}},{key:"cancelRequest",value:function(){this.httpRequest&&this.httpRequest.abort()}},{key:"sendRequest",value:function(){var e=this._sanityCheck();if(e<0){this._errorObject.statusCode=e;try{if(this.errorCallback)return this.errorCallback(this._errorObject)}catch(e){r.default.error("Skynet: HttpRequestHandler: sendRequest - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}if(!window.XMLHttpRequest){r.default.debug("Skynet: HttpRequestHandler: sendRequest - XMLHttpRequest is not supported in browser!!"),this._errorObject.statusCode=i.default.UnSupportedBrowser;try{if(this.errorCallback)return this.errorCallback(this._errorObject)}catch(e){r.default.error("Skynet: HttpRequestHandler: sendRequest - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}if(this.httpRequest=new XMLHttpRequest,!this.httpRequest){r.default.debug("Skynet: HttpRequestHandler: sendRequest - Cannot create an XMLHTTP instance"),this._errorObject.statusCode=i.default.InsufficientMemory;try{if(this.errorCallback)return this.errorCallback(this._errorObject)}catch(e){r.default.error("Skynet: HttpRequestHandler: sendRequest - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}this.httpRequest.onload=this.handleServerResponse.bind(this),this.httpRequest.onerror=this.handleError.bind(this),this.httpRequest.ontimeout=this.handleTimeout.bind(this),this.responseType&&""!==this.responseType&&(this.httpRequest.responseType=this.responseType),this.httpRequest.open(this.methodType,this.url),this._setRequestHeaders(),this.timeout?this.httpRequest.timeout=this.timeout:this.httpRequest.timeout=6e4,this.content?this.httpRequest.send(this.content):this.httpRequest.send()}},{key:"_isResponseSuccessful",value:function(){return this.httpRequest.status>=200&&this.httpRequest.status<400}},{key:"handleServerResponse",value:function(){if(this._isResponseSuccessful()){r.default.debug("Skynet: HttpRequestHandler: handleServerResponse - Request is successfuly completed");try{this.responseCallback&&(this.httpRequest.responseType&&""!==this.httpRequest.responseType?this.responseCallback(this.httpRequest.response):this.responseCallback(this.httpRequest.responseText))}catch(e){r.default.error("Skynet: HttpRequestHandler: handleServerResponse - Caught exception in calling response callback. Exception: ",e," Exception Message ",e.message)}}else{r.default.debug("Skynet: HttpRequestHandler: handleServerResponse - Request failed to complete successfuly"),this._errorObject.statusCode=this.httpRequest.status;try{this.errorCallback&&this.errorCallback(this._errorObject)}catch(e){r.default.error("Skynet: HttpRequestHandler: handleServerResponse - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}}},{key:"handleTimeout",value:function(){r.default.debug("Skynet: HttpRequestHandler: handleTimeout - Timeout occurred in request"),this._errorObject.statusCode=i.default.TimeoutError;try{this.errorCallback&&this.errorCallback(this._errorObject),this.httpRequest.abort()}catch(e){r.default.error("Skynet: HttpRequestHandler: handleTimeout - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}},{key:"handleError",value:function(){r.default.debug("Skynet: HttpRequestHandler: handleError - Error occurred in request"),this._errorObject.statusCode=i.default.NetworkFailure;try{this.errorCallback&&this.errorCallback(this._errorObject)}catch(e){r.default.error("Skynet: HttpRequestHandler: handleError - Caught exception in calling error callback. Exception: ",e," Exception Message ",e.message)}}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"getErrorCode",value:function(t,n){switch(n){case-1:return"UnSupported_Browser";case-2:return"Insufficient_Memory";case-3:return"UnSupported_Url_Scheme";case-4:return"UnSupported_Method_Type";case-5:return"Url_Scheme_Missing";case-6:return"Url_Hostname_Missing";case-7:return"Method_Type_Missing";case-8:return"Request_Timeout";case-9:return"Network_Failure";case-10:return"InvalidRequest";default:return e._getSchemeBasedErrorCodes(t,n)}}},{key:"_getSchemeBasedErrorCodes",value:function(t,n){switch(t){case"wss":case"ws":return e._getErrorCodesForWebsocketRequest(n);case"https":case"http":return e._getErrorCodesForHttpRequest(n)}}},{key:"_getErrorCodesForWebsocketRequest",value:function(e){return"UnSupported_Url_Scheme"}},{key:"_getErrorCodesForHttpRequest",value:function(e){switch(e){case 200:case 304:return"Success";case 400:return"Bad_Request";case 401:return"Unauthorized";case 403:return"Forbidden";case 404:return"Resource_Not_Found";case 407:return"Proxy_Authentication_Required";case 408:return"Request_Timeout";case 429:return"Too_Many_Requests";case 500:return"Internal_Server_Error";case 501:return"Request_Not_Implemented";case 502:return"Bad_Gateway";case 503:return"Service_Unavailable";case 504:return"Gateway_Timeout";default:return e>400&&e<500?"Client_Request_Error":e>=500&&e<600?"Server_Response_Error":"Invalid_Request"}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"addUrlQueryParams",value:function(e,t){if("undefined"!==t&&"object"===(void 0===t?"undefined":a(t)))for(var n in t){n=encodeURIComponent(n);var i=encodeURIComponent(t[n]);e+=(e.split("?")[1]?"&":"?")+n+"="+i}return e}},{key:"createUrl",value:function(t,n,a,i,r){var o=t+"://",s="";return-1==n.indexOf(o)&&(s=o),s+=n+a+i,e.addUrlQueryParams(s,r)}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(0)),r=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var s=120,u=10,l=8192,c="https://ans.oobesaas.adobe.com",d="https://stg-ans.oobesaas.adobe.com",f="https://notify.adobe.io",h="https://notify-stage.adobe.io",p="/ans/v2/notifications/timeline",g="/ans/v1/notifications",v="/ans/v2/notifications/longpoll",b="/ans/v2/notifications/count",y="/ans/v2/notifications/search",m="/ans/v2/device/",_=1,C=540,k=.1,S="/ans/v2/preferences/category/user",D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.notificationConfiguration={}}return a(e,[{key:"initialize",value:function(e){this.pollingInterval=s,this.pageSize=u,this.payloadSize=l,this.serverShortPollUri=g,this.serverBackFillUri=p,this.serverLongPollUri=v,this.serverNotificationUnreadCountURI=b,this.serverNotificationSearchURI=y,this.serverDeviceRegisterUnRegisterURI=m,this.longPollEnabled=_,this.longPollTimeout=C,this.configVersion=k,this.serverUserPreferencesURI=S,"prod"===e.env?(this.serverBaseUrl=c,this.serverBaseAdobeIOUrl=f):(this.serverBaseUrl=d,this.serverBaseAdobeIOUrl=h)}},{key:"_setConfigParamsHelper",value:function(e,t){switch(e){case"NEPollingInterval":this.pollingInterval=parseInt(t,10);break;case"NEPageSize":this.pageSize=parseInt(t,10);break;case"NEPayloadSize":this.payloadSize=parseInt(t,10);break;case"NEServerBaseURL":this.serverBaseUrl=t;break;case"NEServerAdobeIOBaseURL":this.serverBaseAdobeIOUrl=t;break;case"NEServerURI":this.serverShortPollUri=t;break;case"NEServerURILongPoll":this.serverLongPollUri=t;break;case"NELongPollEnabled":this.longPollEnabled=1===parseInt(t,10);break;case"NELongPollTimeout":this.longPollTimeout=parseInt(t,10)}}},{key:"setConfigParams",value:function(e){this.notificationConfiguration=e;for(var t=e["config-params"]["config-param"],n=0;n<t.length;n+=1){var a=t[n];this._setConfigParamsHelper(a.key,a.value[0])}Object.prototype.hasOwnProperty.call(e,"complete-version")?this.configVersion=e["complete-version"]:this.configVersion=e.version,i.default.debug("configurations",this)}},{key:"serveNotificationConfigurationRequest",value:function(e){r.default.sendMessageToApplet(e.data.namespace,this.notificationConfiguration,e.sourceID)}}]),e}();t.default=D},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(0));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hostObservers=new Map,this._sourcePropertySeparator="|*#%"}return i(e,[{key:"_preprocessHostObserversList",value:function(e){if(!e||"object"!==(void 0===e?"undefined":a(e))||!e.callbackFn||"function"!=typeof e.callbackFn)return!1;e.observersList&&Array.isArray(e.observersList)||(e.observersList&&(e.observersList.type||e.observersList.subtype)?e.observersList=[{type:e.observersList.type?e.observersList.type:"*",subtype:e.observersList.subtype?e.observersList.subtype:"*"}]:e.observersList=[{type:"*",subtype:"*"}]);for(var t=0;t<e.observersList.length;t+=1)e.observersList[t].type=e.observersList[t].type?e.observersList[t].type:"*",e.observersList[t].subtype=e.observersList[t].subtype?e.observersList[t].subtype:"*";return!0}},{key:"_addRule",value:function(e,t){var n=e.version;void 0===n&&(n="");var a=e.id+this._sourcePropertySeparator+n,i=e.observersList,r=e.requestContext;void 0===r&&(r="");for(var o=e.callbackFn,s=0;s<i.length;s+=1){var u=i[s].type,l=i[s].subtype;this._hostObservers.has(a)||this._hostObservers.set(a,new Set),this._hostObservers.get(a).add({mode:t,type:u,subType:l,callbackFn:o,requestContext:r})}return!0}},{key:"_getHostListenersList",value:function(e,t){var n=new Set;return this._hostObservers.forEach(function(a){var i=!1,r=void 0,o=void 0;a.forEach(function(n){"*"!==n.type&&n.type!==e||"*"!==n.subType&&n.subType!==t||(i="+"===n.mode,r=n.callbackFn,o=n.requestContext)}),i&&n.add({callBackFunc:r,requestContext:o})}),n}},{key:"registerObserver",value:function(e){return!!this._preprocessHostObserversList(e.data)&&this._addRule(e.data,"+")}},{key:"unregisterObserver",value:function(e){return!!this._preprocessHostObserversList(e.data)&&this._addRule(e.data,"-")}},{key:"notifyObservers",value:function(e){for(var t=this,n=function(n){t._getHostListenersList(e[n].type,e[n]["sub-type"]).forEach(function(t){var a={notifications:{notification:[e[n]]}};try{var i=void 0;i=t.requestContext?{requestContext:t.requestContext,data:a}:{data:a},t.callBackFunc&&"function"==typeof t.callBackFunc&&t.callBackFunc(i)}catch(e){r.default.error("UNCEngine: HostClientNotificationDispatcher: notifyObservers - Callback exception: ",e)}})},a=0;a<e.length;a+=1)n(a);return!0}}]),e}();t.default=new o},function(e,t,n){"use strict";var a=n(26);e.exports=a},function(e,t,n){"use strict";(function(e){var n,a,i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,s){"object"==r(t)&&"object"==r(e)?e.exports=s():(a=[],void 0===(i="function"==typeof(n=s)?n.apply(t,a):n)||(e.exports=i))}(0,function(){return function(e){function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var a=new Uint8Array(16);e.exports=function(){return n(a),a}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],a=0;a<256;++a)n[a]=(a+256).toString(16).substr(1);e.exports=function(e,t){var a=t||0,i=n;return[i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],"-",i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]],i[e[a++]]].join("")}},function(e,t,n){var a=n(3);e.exports=a},function(e,t,n){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw r}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},s="function"==typeof Symbol&&"symbol"==r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=a(n(4)),c=a(n(7)),d=a(n(10)),f=a(n(11)),h="https://cc-api-data-stage.adobe.io",p="https://cc-api-data.adobe.io",g=[],v=[],b={},y=!1,m=function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.eventsObject={},this.sourcesObject={},this.contentsObject={},this.usersObject={},this.uiObject={},this.environmentObject={},this.consumerObject={},this.experimentObject={},this.customObject={},this.searchObject={},this.trnObject={},this.contextObject={},this.metricsCollection=[],this.initData={},this.initData.hostName=h,void 0===t||"production"!==t.environment&&"prod"!==t.environment||(this.initData.hostName=p),t&&(d.default.log("initData = ",t),Object.keys(t).forEach(function(e){t.hasOwnProperty(e)&&(n.initData[e]=t[e])})),this.haveIMSObject="undefined"!=typeof adobeIMS&&adobeIMS.isSignedInUser()}return u(e,[{key:"deferredPost",value:function(e,t){g.push(e),v.push(t),b={deferredInitDataArray:v,deferredPostArrays:g}}},{key:"isVisitorGuidDefined",value:function(e){return e[0].events[0].data["event.visitor_guid"]||y}},{key:"getInstance",value:function(){var e=void 0;if(!window.Visitor)return e;try{e=void 0!==this.initData.visitorGUID?Visitor.getInstance(this.initData.visitorGUID):Visitor.getInstance("D6FAAFAD54CA9F560A4C98A5@AdobeOrg")}catch(e){console.warn(e)}return e}},{key:"getMCID",value:function(){if(!window.Visitor)return null;var e=this.getInstance();return void 0!==e?e.getMarketingCloudVisitorID():null}},{key:"getVisitorGuid",value:function(){if(!window.Visitor)return e.generateVisitorGuid();var t=this.getInstance();return void 0!==t?t.getMarketingCloudVisitorID():e.generateVisitorGuid()}},{key:"initAnalytics",value:function(){if(void 0===e.visitorGuid&&"undefined"!=typeof Visitor){y=!0;var t=this.getMCID();t&&(e.visitorGuid=t)}d.default.log("Ingest.visitorGuid = ",e.visitorGuid)}},{key:"initArrays",value:function(e){this.eventsObject={},this.sourcesObject={},this.contentsObject={},this.usersObject={},this.uiObject={},this.environmentObject={},this.consumerObject={},this.experimentObject={},this.customObject={},this.searchObject={},this.trnObject={},this.contextObject={},e&&(this.metricsCollection=[])}},{key:"getIMSTokenAndLocale",value:function(){return adobeIMS.version.startsWith("v2-")?{locale:adobeIMS.adobeIdData.locale,token:adobeIMS.getAccessToken().token}:{locale:adobeIMS.getLocale(),token:adobeIMS.getAccessToken()}}},{key:"getDefaultHeaders",value:function(){var e={"x-api-key":this.initData.xApiKey,"content-type":"application/json"},t="";return this.haveIMSObject?t=this.getIMSTokenAndLocale().token:this.objectExists(this.initData.userIMSData)&&(t=this.initData.userIMSData.accessToken),t&&(e.Authorization="Bearer "+t),e}},{key:"flattenObj",value:function(e,t,n){var a=this;try{Object.keys(e).forEach(function(i){var r=e[i],o=n?n+"."+i:i;r&&"object"===(void 0===r?"undefined":s(r))?a.flattenObj(r,t,o):t[o]=r})}catch(e){t=e}return t}},{key:"getBody",value:function(e,t,n,a,i,r,s,u,l,c,d,f){var h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:{},p={event:o({},h,e),source:t,content:n,user:a,ui:i,consumer:r,env:s,exp:u,custom:l,search:c,trn:d,context:f},g={time:this.getTimeString(),project:this.initData.project,environment:this.initData.environment,ingesttype:"dunamis",data:this.flattenObj(p,{})},v={events:[g]};try{window&&window.sessionStorage&&"true"===window.sessionStorage.getItem("IngestAnalyticsDataLog")&&console.log("[Ingest Analytics] Event Data: ",JSON.stringify(g),g)}catch(e){}return v}},{key:"initializeDefaultData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.initArrays(e),this.initAnalytics(),{events:this.getDefaultEventData(this.eventsObject),source:this.getDefaultSourceData(this.sourcesObject),contents:this.getDefaultContentData(this.contentsObject),user:this.getDefaultUserData(this.usersObject),ui:this.getDefaultUIData(this.uiObject),consumer:this.getDefaultConsumerData(this.consumerObject),env:this.getDefaultEnvironmentData(this.environmentObject),exp:this.getDefaultExperimentData(this.experimentObject),custom:this.getDefaultCustomData(this.customObject),search:this.getDefaultSearchData(this.searchObject),trn:this.getDefaultTrnData(this.trnObject),context:this.getDefaultConextData(this.contextObject),eventsArray:[]}}},{key:"isIMS_SignedIn",value:function(){var e=!1;return this.haveIMSObject?e=!0:this.objectExists(this.initData.userIMSData)&&(e=!0),e}},{key:"getParamsAppendedUrl",value:function(t){var n=t;if(e.storageAvailable("sessionStorage")&&sessionStorage.getItem("ingest_url_params")){var a=JSON.parse(sessionStorage.getItem("ingest_url_params"));Object.keys(a).forEach(function(e){if(-1===n.indexOf("&"+e+"=")&&-1===n.indexOf("?"+e+"=")){var t=-1===n.indexOf("?")?"?":"&";n=""+n+t+e+"="+a[e]}})}return n}},{key:"getDefaultEventData",value:function(t){if(e.storageAvailable("sessionStorage")){var n=sessionStorage.getItem("ingestSessionId");n||(n=c.default.v4(),sessionStorage.setItem("ingestSessionId",n)),t.session_guid=n}t.guid=c.default.v4(),this.haveIMSObject?t.language=this.getIMSTokenAndLocale().locale:this.objectExists(this.initData.userIMSData)&&(t.language=this.initData.userIMSData.locale);var a=window.document.referrer,i=window.document.location.href;if(this.initData.useLocalReferrer&&e.storageAvailable("sessionStorage")){d.default.log("used eventData.referrer");var r=sessionStorage.getItem(this.initData.referrerStorageName);if(r){var o=JSON.parse(r);a=o.referrer,o.url&&(i=o.url)}}t.referrer=a,t.url=this.getParamsAppendedUrl(i),d.default.log("referrer = ",t.referrer),d.default.log("url = ",t.url),t.category="WEB",t.visitor_guid=e.visitorGuid,t.mcid_guid=e.visitorGuid,t.dts_end=this.getTimeString(),this.initData.userAgent?t.user_agent=this.initData.userAgent:t.user_agent=navigator.userAgent,this.initData.category?t.category=this.initData.category:t.category="WEB","boolean"==typeof this.initData.offline?t.offline=this.initData.offline:t.offline=!0;var s="";return this.haveIMSObject&&!adobeIMS.version.startsWith("v2-")?s=adobeIMS.getUserProfile().userId:this.objectExists(this.initData.userIMSData)&&(s=this.initData.userIMSData.adobeId),s&&(t.user_guid=s),this.initData.sessionGuid&&(t.session_guid=this.initData.sessionGuid),t}},{key:"getDefaultSourceData",value:function(e){return e.client_id=this.initData.clientId,this.initData.version?e.version=this.initData.version:e.version="1.0",this.initData.platformType?e.platform=this.initData.platformType:e.platform="Web",this.initData.device?e.device=this.initData.device:e.device=this.getDevice(),this.initData.source&&(e.name=this.initData.source),this.initData.osVersion?e.os_version=this.initData.osVersion:e.os_version=this.getOSVersion(),e}},{key:"getDefaultContentData",value:function(t){if(e.storageAvailable("sessionStorage")){var n=sessionStorage.getItem("stakeholder");this.objectExists(n)&&n.length>0&&(t.author="true"===n?"stakeholder":"designer")}return t}},{key:"getDefaultUserData",value:function(t){var n=[];if(this.haveIMSObject&&!adobeIMS.version.startsWith("v2-")?(n=adobeIMS.getUserProfile().serviceAccounts)&&n.length>0&&(n[0].serviceLevel&&(t.service_level=n[0].serviceLevel),n[0].serviceStatus&&(t.service_status=n[0].serviceStatus,t.service_code=n[0].serviceCode)):this.objectExists(this.initData.userIMSData)&&this.objectExists(this.initData.userIMSData.serviceAccounts)&&(n=this.initData.userIMSData.serviceAccounts.serviceAccount)&&n.length>0&&(t.service_level=n[0].serviceLevel,t.service_status=n[0].serviceStatus,t.service_code=n[0].serviceCode),e.storageAvailable("sessionStorage")){var a=sessionStorage.getItem("subscriptionPlan");this.objectExists(a)&&a.length>0&&(t.service_code=a)}return t}},{key:"getDefaultUIData",value:function(e){return e}},{key:"getDefaultConsumerData",value:function(e){return this.initData.source&&(e.name=this.initData.source),this.initData.componentName&&(e.name=this.initData.componentName),this.initData.componentVersion&&(e.version=this.initData.componentVersion),e}},{key:"getDefaultEnvironmentData",value:function(e){return this.initData.envComponentName&&(e["com.name"]=this.initData.envComponentName),this.initData.envComponentVersion&&(e["com.version"]=this.initData.envComponentVersion),e}},{key:"getDefaultExperimentData",value:function(e){return e}},{key:"getDefaultCustomData",value:function(e){return e}},{key:"getDefaultSearchData",value:function(e){return e}},{key:"getDefaultTrnData",value:function(e){return e}},{key:"getDefaultConextData",value:function(e){return e}},{key:"objectExists",value:function(e){return void 0!==e&&null!==e}},{key:"setDataValue",value:function(e,t,n){switch(e){case"event":this.eventsObject[t]=n;break;case"source":this.sourcesObject[t]=n;break;case"content":var a=n;"name"===t&&(a="string"==typeof n?n.replace(/[^\x00-\x7F]/g,""):""),this.contentsObject[t]=a;break;case"user":this.usersObject[t]=n;break;case"ui":this.uiObject[t]=n;break;case"consumer":this.consumerObject[t]=n;break;case"env":this.environmentObject[t]=n;break;case"exp":this.experimentObject[t]=n;break;case"custom":this.customObject[t]=n;break;case"search":this.searchObject[t]=n;break;case"trn":this.trnObject[t]=n;break;case"context":this.contextObject[t]=n}}},{key:"getDevice",value:function(){return window.navigator.platform}},{key:"getOSVersion",value:function(){return l.default.os.version}},{key:"getPlatformData",value:function(){return l.default}},{key:"addToCollection",value:function(){this.metricsCollection.push(this.getBody(this.eventsObject,this.sourcesObject,this.contentsObject,this.usersObject,this.uiObject,this.consumerObject,this.environmentObject,this.experimentObject,this.customObject,this.searchObject,this.trnObject,this.contextObject)),this.initializeDefaultData(!1)}},{key:"getContextGuid",value:function(){var t=void 0;return e.storageAvailable("sessionStorage")&&(t=sessionStorage.getItem("context.guid")),"string"!=typeof t&&(t=c.default.v4(),e.storageAvailable("sessionStorage")&&sessionStorage.setItem("context.guid",t)),t}},{key:"getEvents",value:function(e){var t=[],n=!0,a=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value;t.push(s.events[0])}}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}return{events:t}}},{key:"hasAdBlocker",value:function(){return new Promise(function(e){(0,f.default)(function(t){var n={};t?(n.hasAdBlocker=!0,e(n)):(n.hasAdBlocker=!1,e(n))},{testInterval:1,testRuns:1})})}},{key:"sendToIngest",value:function(){var t=this;if(!this.objectExists(this.initData.dontPostAnalytics)||!0!==this.initData.dontPostAnalytics){var n=5e3;this.objectExists(this.initData.timeOutForScripts)&&(n=this.initData.timeOutForScripts);var a=this.metricsCollection.slice(),r=[this.hasAdBlocker()];return this.haveIMSObject&&adobeIMS.version.startsWith("v2-")?r.push(adobeIMS.getProfile().catch(function(){return null})):r.push(new Promise(function(e){e(null)})),new Promise(function(o,s){Promise.all(r).then(function(r){var u=i(r,2),l=u[0],c=u[1];if(l?l.hasAdBlocker?d.default.log("Ingest: Ad blocker is detected"):d.default.log("Ingest: Ad blocker is not detected"):l.hasAdBlocker=!1,c&&a.forEach(function(e){e.events.forEach(function(e){e.data["event.user_guid"]||(e.data["event.user_guid"]=c.userId),c.serviceAccounts&&c.serviceAccounts.length>0&&(!e.data["user.service_level"]&&c.serviceAccounts[0].serviceLevel&&(e.data["user.service_level"]=c.serviceAccounts[0].serviceLevel),!e.data["user.service_status"]&&c.serviceAccounts[0].serviceStatus&&(e.data["user.service_status"]=c.serviceAccounts[0].serviceStatus),!e.data["user.service_code"]&&c.serviceAccounts[0].serviceCode&&(e.data["user.service_code"]=c.serviceAccounts[0].serviceCode))})}),setTimeout(function(){e.initDeferredPost(l.hasAdBlocker)},n),!t.isVisitorGuidDefined(a))return t.deferredPost(a,t.initData),o();var f=t.createPromiseToPostEvents(a,c);f&&f.then?f.then(o).catch(s):o()})})}}},{key:"createPromiseToPostEvents",value:function(e,t){if(!this.objectExists(window.visitorset)||window.visitorset){if(this.objectExists(this.initData.sendEventsToHost)&&!0===this.initData.sendEventsToHost&&this.objectExists(this.initData.eventsCallBack))return void this.initData.eventsCallBack(e);var n=this.logToIngest(e,t);return n.then(function(){d.default.log("Post to Ingest request successful")},function(){d.default.warn("Post to ingest request failed")}),n}}},{key:"getTimeString",value:function(){var e=new Date,t="",n=-e.getTimezoneOffset();return n>=0?t="+":(t="-",n*=-1),t+=("0"+parseInt(n/60)).slice(-2)+("0"+n%60).slice(-2),e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+"T"+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+t}},{key:"logToIngest",value:function(e,t){var n,a=this;return n=this.initData.apiKey?"/ingest/?api_key="+this.initData.apiKey:this.initData.path,new Promise(function(i,r){window.XMLHttpRequest||(d.default.debug("Ingest: logToIngest - XMLHttpRequest is not supported in browser!!"),r(Error("problem with window XMLHttpRequest"))),a.httpRequest=new XMLHttpRequest,a.httpRequest||(d.default.debug("Ingest: logToIngest: Cannot create an XMLHTTP instance"),r(Error("problem with creating XMLHttpRequest"))),a.httpRequest.onload=function(){d.default.debug("Ingest: logToIngest: Event successfully posted"),i(a.httpRequest.responseText)},a.httpRequest.onerror=function(){d.default.debug("Ingest: logToIngest: Error in sending ingest data"),r(Error("Ingest: logToIngest: Got error response in XMLHttpRequest"))},a.httpRequest.ontimeout=function(){d.default.debug("Ingest: logToIngest: Request timed out while sending ingest data"),a.httpRequest.abort(),r(Error("Ingest: logToIngest: Request got timed out"))},navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")>0&&(a.httpRequest.responseType="text");var o=a.initData.hostName;0!==o.indexOf("https://")&&(o="https://"+a.initData.hostName),a.httpRequest.open("POST",o+n);var s=a.getDefaultHeaders();for(var u in s)a.httpRequest.setRequestHeader(u,s[u]);a.objectExists(a.initData.setTimeOut)?(d.default.debug("set time out"),a.httpRequest.timeout=a.initData.setTimeOut):(d.default.debug("default timeout"),a.httpRequest.timeout=6e4);try{var l="";a.haveIMSObject&&!adobeIMS.version.startsWith("v2-")?l=adobeIMS.getUserProfile().account_type:a.objectExists(a.initData.userIMSData)?l=a.initData.userIMSData.accountType:t&&(l=t.account_type),!l||"type1"===l||a.initData.sendEnterprise&&!0===a.initData.sendEnterprise?a.initData.optOutAnalytics?(d.default.debug("Ingest: User opts out"),i("User opts out")):a.httpRequest.send(JSON.stringify(a.getEvents(e))):(d.default.debug("Ingest: User is Enterprise user or offline"),i("Enterprise User or offline"))}catch(e){d.default.debug("Ingest: logToIngest: Error in sending ingest data"),r(Error("Ingest: logToIngest: Got error response in XMLHttpRequest"))}})}}],[{key:"getStorageName",value:function(){return"INIT_INGEST_DATA"}},{key:"initDeferredPost",value:function(t){if(0!==Object.getOwnPropertyNames(b).length){var n=b.deferredPostArrays||[],a=b.deferredInitDataArray||[];if(n.length){var i=new e,r=0,o=void 0,s=!0;e.storageAvailable("localStorage")?(o=localStorage.getItem("ingest_guid"))||(o=c.default.v4(),localStorage.setItem("ingest_guid",o)):(s=!1,o=c.default.v4());var u=!0,l=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;i.initData=a[r++];var m=!0,_=!1,C=void 0;try{for(var k,S=p[Symbol.iterator]();!(m=(k=S.next()).done);m=!0){var D=k.value;if("undefined"!=typeof Visitor||y)D.events[0].data["event.visitor_guid"]=e.visitorGuid,D.events[0].data["event.mcid_guid"]=e.visitorGuid;else if(s){if(t){if(o){D.events[0].data["event.context_sequence"]="UN-AB";var N=o;D.events[0].data["event.visitor_guid"]=N,D.events[0].data["event.mcid_guid"]=N}}else if(o){D.events[0].data["event.context_sequence"]="UN-TO";var O=o;D.events[0].data["event.visitor_guid"]=O,D.events[0].data["event.mcid_guid"]=O}}else if(t){D.events[0].data["event.context_sequence"]="UN-AB";var R=o;D.events[0].data["event.visitor_guid"]=R,D.events[0].data["event.mcid_guid"]=R}else{D.events[0].data["event.context_sequence"]="UN-TO";var T=o;D.events[0].data["event.visitor_guid"]=T,D.events[0].data["event.mcid_guid"]=T}}}catch(e){_=!0,C=e}finally{try{!m&&S.return&&S.return()}finally{if(_)throw C}}i.createPromiseToPostEvents(p)}}catch(e){l=!0,d=e}finally{try{!u&&h.return&&h.return()}finally{if(l)throw d}}b={},g=[],v=[]}}}},{key:"generateVisitorGuid",value:function(){var t=void 0;return e.storageAvailable("localStorage")?(t=localStorage.getItem("ingest_guid"))||(t=c.default.v4(),localStorage.setItem("ingest_guid",t)):t=c.default.v4(),t}},{key:"storageAvailable",value:function(e){var t=void 0;try{if("cookie"===e){var n=navigator.cookieEnabled;return n||(document.cookie="testcookie",n=-1!==document.cookie.indexOf("testcookie")),n}t=window[e];var a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&void 0!==t&&0!==t.length}}}]),e}();t.default=m,m.visitorGuid},function(e,t,n){(function(e,a){var i;(function(){function o(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function s(e){return e=f(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:o(e)}function u(e,t){for(var n in e)C.call(e,n)&&t(e[n],n,e)}function l(e){return null==e?o(e):k.call(e).slice(8,-1)}function c(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function d(e,t){var n=null;return function(e,t){var n=-1,a=e?e.length:0;if("number"==typeof a&&a>-1&&a<=y)for(;++n<a;)t(e[n],n,e);else u(e,t)}(e,function(a,i){n=t(n,a,i,e)}),n}function f(e){return String(e).replace(/^ +| +$/g,"")}var h={function:!0,object:!0},p=h["undefined"==typeof window?"undefined":r(window)]&&window||this,g=h[void 0===t?"undefined":r(t)]&&t,v=h[void 0===e?"undefined":r(e)]&&e&&!e.nodeType&&e,b=g&&v&&"object"==(void 0===a?"undefined":r(a))&&a;!b||b.global!==b&&b.window!==b&&b.self!==b||(p=b);var y=Math.pow(2,53)-1,m=/\bOpera/,_=Object.prototype,C=_.hasOwnProperty,k=_.toString,S=function e(t){function n(e){return d(e,function(e,n){var a=n.pattern||c(n);return!e&&(e=RegExp("\\b"+a+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+a+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+a+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(n.label&&!RegExp(a,"i").test(n.label)?n.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),n=n.label||n,e=s(e[0].replace(RegExp(a,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),e})}var a=p,i=t&&"object"==(void 0===t?"undefined":r(t))&&"String"!=l(t);i&&(a=t,t=null);var o=a.navigator||{},h=o.userAgent||"";t||(t=h);var g,v,b=i?!!o.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(k.toString()),y=i?"Object":"ScriptBridgingProxyObject",_=i?"Object":"Environment",C=i&&a.java?"JavaPackage":l(a.java),S=i?"Object":"RuntimeObject",D=/\bJava/.test(C)&&a.java,N=D&&l(a.environment)==_,O=D?"a":"",R=D?"b":"",T=a.document||{},E=a.operamini||a.opera,w=m.test(w=i&&E?E["[[Class]]"]:l(E))?w:E=null,P=t,q=[],M=null,I=t==h,A=I&&E&&"function"==typeof E.version&&E.version(),U=d([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(e,n){return e||RegExp("\\b"+(n.pattern||c(n))+"\\b","i").exec(t)&&(n.label||n)}),x=d(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(e,n){return e||RegExp("\\b"+(n.pattern||c(n))+"\\b","i").exec(t)&&(n.label||n)}),F=n([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),j=d({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},function(e,n,a){return e||(n[F]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(F)]||RegExp("\\b"+c(a)+"(?:\\b|\\w*\\d)","i").exec(t))&&a}),H=d(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(e,n){var a=n.pattern||c(n);return!e&&(e=RegExp("\\b"+a+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,n){var a={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(a=a[/[\d.]+$/.exec(e)])&&(e="Windows "+a),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),s(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,a,n.label||n)),e});if(U&&(U=[U]),j&&!F&&(F=n([j])),(g=/\bGoogle TV\b/.exec(F))&&(F=g[0]),/\bSimulator\b/i.test(t)&&(F=(F?F+" ":"")+"Simulator"),"Opera Mini"==x&&/\bOPiOS\b/.test(t)&&q.push("running in Turbo/Uncompressed mode"),"IE"==x&&/\blike iPhone OS\b/.test(t)?(j=(g=e(t.replace(/like iPhone OS/,""))).manufacturer,F=g.product):/^iP/.test(F)?(x||(x="Safari"),H="iOS"+((g=/ OS ([\d_]+)/i.exec(t))?" "+g[1].replace(/_/g,"."):"")):"Konqueror"!=x||/buntu/i.test(H)?j&&"Google"!=j&&(/Chrome/.test(x)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(F))||/\bAndroid\b/.test(H)&&/^Chrome/.test(x)&&/\bVersion\//i.test(t)?(x="Android Browser",H=/\bAndroid\b/.test(H)?H:"Android"):"Silk"==x?(/\bMobi/i.test(t)||(H="Android",q.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&q.unshift("accelerated")):"PaleMoon"==x&&(g=/\bFirefox\/([\d.]+)\b/.exec(t))?q.push("identifying as Firefox "+g[1]):"Firefox"==x&&(g=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(H||(H="Firefox OS"),F||(F=g[1])):!x||(g=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(x))?(x&&!F&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(g+"/")+8))&&(x=null),(g=F||j||H)&&(F||j||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(H))&&(x=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(H)?H:g)+" Browser")):"Electron"==x&&(g=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&q.push("Chromium "+g):H="Kubuntu",A||(A=d(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version",c(x),"(?:Firefox|Minefield|NetFront)"],function(e,n){return e||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null})),(g=("iCab"==U&&parseFloat(A)>3?"WebKit":/\bOpera\b/.test(x)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(U)&&"WebKit"||!U&&/\bMSIE\b/i.test(t)&&("Mac OS"==H?"Tasman":"Trident")||"WebKit"==U&&/\bPlayStation\b(?! Vita\b)/i.test(x)&&"NetFront")&&(U=[g]),"IE"==x&&(g=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(x+=" Mobile",H="Windows Phone "+(/\+$/.test(g)?g:g+".x"),q.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(x="IE Mobile",H="Windows Phone 8.x",q.unshift("desktop mode"),A||(A=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=x&&"Trident"==U&&(g=/\brv:([\d.]+)/.exec(t))&&(x&&q.push("identifying as "+x+(A?" "+A:"")),x="IE",A=g[1]),I){if(function(e,t){var n=null!=e?r(e[t]):"number";return!(/^(?:boolean|number|string|undefined)$/.test(n)||"object"==n&&!e[t])}(a,"global"))if(D&&(P=(g=D.lang.System).getProperty("os.arch"),H=H||g.getProperty("os.name")+" "+g.getProperty("os.version")),N){try{A=a.require("ringo/engine").version.join("."),x="RingoJS"}catch(t){(g=a.system)&&g.global.system==a.system&&(x="Narwhal",H||(H=g[0].os||null))}x||(x="Rhino")}else"object"==r(a.process)&&!a.process.browser&&(g=a.process)&&("object"==r(g.versions)&&("string"==typeof g.versions.electron?(q.push("Node "+g.versions.node),x="Electron",A=g.versions.electron):"string"==typeof g.versions.nw&&(q.push("Chromium "+A,"Node "+g.versions.node),x="NW.js",A=g.versions.nw)),x||(x="Node.js",P=g.arch,H=g.platform,A=(A=/[\d.]+/.exec(g.version))?A[0]:null));else l(g=a.runtime)==y?(x="Adobe AIR",H=g.flash.system.Capabilities.os):l(g=a.phantom)==S?(x="PhantomJS",A=(g=g.version||null)&&g.major+"."+g.minor+"."+g.patch):"number"==typeof T.documentMode&&(g=/\bTrident\/(\d+)/i.exec(t))?(A=[A,T.documentMode],(g=+g[1]+4)!=A[1]&&(q.push("IE "+A[1]+" mode"),U&&(U[1]=""),A[1]=g),A="IE"==x?String(A[1].toFixed(1)):A[0]):"number"==typeof T.documentMode&&/^(?:Chrome|Firefox)\b/.test(x)&&(q.push("masking as "+x+" "+A),x="IE",A="11.0",U=["Trident"],H="Windows");H=H&&s(H)}if(A&&(g=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(A)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(I&&o.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(M=/b/i.test(g)?"beta":"alpha",A=A.replace(RegExp(g+"\\+?$"),"")+("beta"==M?R:O)+(/\d+\+?/.exec(g)||"")),"Fennec"==x||"Firefox"==x&&/\b(?:Android|Firefox OS)\b/.test(H))x="Firefox Mobile";else if("Maxthon"==x&&A)A=A.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(F))"Xbox 360"==F&&(H=null),"Xbox 360"==F&&/\bIEMobile\b/.test(t)&&q.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(x)&&(!x||F||/Browser|Mobi/.test(x))||"Windows CE"!=H&&!/Mobi/i.test(t))if("IE"==x&&I)try{null===a.external&&q.unshift("platform preview")}catch(t){q.unshift("embedded")}else(/\bBlackBerry\b/.test(F)||/\bBB10\b/.test(t))&&(g=(RegExp(F.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||A)?(H=((g=[g,/BB10/.test(t)])[1]?(F=null,j="BlackBerry"):"Device Software")+" "+g[0],A=null):this!=u&&"Wii"!=F&&(I&&E||/Opera/.test(x)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==x&&/\bOS X (?:\d+\.){2,}/.test(H)||"IE"==x&&(H&&!/^Win/.test(H)&&A>5.5||/\bWindows XP\b/.test(H)&&A>8||8==A&&!/\bTrident\b/.test(t)))&&!m.test(g=e.call(u,t.replace(m,"")+";"))&&g.name&&(g="ing as "+g.name+((g=g.version)?" "+g:""),m.test(x)?(/\bIE\b/.test(g)&&"Mac OS"==H&&(H=null),g="identify"+g):(g="mask"+g,x=w?s(w.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(g)&&(H=null),I||(A=null)),U=["Presto"],q.push(g));else x+=" Mobile";(g=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(g=[parseFloat(g.replace(/\.(\d)$/,".0$1")),g],"Safari"==x&&"+"==g[1].slice(-1)?(x="WebKit Nightly",M="alpha",A=g[1].slice(0,-1)):A!=g[1]&&A!=(g[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(A=null),g[1]=(/\bChrome\/([\d.]+)/i.exec(t)||0)[1],537.36==g[0]&&537.36==g[2]&&parseFloat(g[1])>=28&&"WebKit"==U&&(U=["Blink"]),I&&(b||g[1])?(U&&(U[1]="like Chrome"),g=g[1]||((g=g[0])<530?1:g<532?2:g<532.05?3:g<533?4:g<534.03?5:g<534.07?6:g<534.1?7:g<534.13?8:g<534.16?9:g<534.24?10:g<534.3?11:g<535.01?12:g<535.02?"13+":g<535.07?15:g<535.11?16:g<535.19?17:g<536.05?18:g<536.1?19:g<537.01?20:g<537.11?"21+":g<537.13?23:g<537.18?24:g<537.24?25:g<537.36?26:"Blink"!=U?"27":"28")):(U&&(U[1]="like Safari"),g=(g=g[0])<400?1:g<500?2:g<526?3:g<533?4:g<534?"4+":g<535?5:g<537?6:g<538?7:g<601?8:"8"),U&&(U[1]+=" "+(g+="number"==typeof g?".x":/[.+]/.test(g)?"":"+")),"Safari"==x&&(!A||parseInt(A)>45)&&(A=g)),"Opera"==x&&(g=/\bzbov|zvav$/.exec(H))?(x+=" ",q.unshift("desktop mode"),"zvav"==g?(x+="Mini",A=null):x+="Mobile",H=H.replace(RegExp(" *"+g+"$"),"")):"Safari"==x&&/\bChrome\b/.exec(U&&U[1])&&(q.unshift("desktop mode"),x="Chrome Mobile",A=null,/\bOS X\b/.test(H)?(j="Apple",H="iOS 4.3+"):H=null),A&&0==A.indexOf(g=/[\d.]+$/.exec(H))&&t.indexOf("/"+g+"-")>-1&&(H=f(H.replace(g,""))),U&&!/\b(?:Avant|Nook)\b/.test(x)&&(/Browser|Lunascape|Maxthon/.test(x)||"Safari"!=x&&/^iOS/.test(H)&&/\bSafari\b/.test(U[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(x)&&U[1])&&(g=U[U.length-1])&&q.push(g),q.length&&(q=["("+q.join("; ")+")"]),j&&F&&F.indexOf(j)<0&&q.push("on "+j),F&&q.push((/^on /.test(q[q.length-1])?"":"on ")+F),H&&(g=/ ([\d.+]+)$/.exec(H),v=g&&"/"==H.charAt(H.length-g[0].length-1),H={architecture:32,family:g&&!v?H.replace(g[0],""):H,version:g?g[1]:null,toString:function(){var e=this.version;return this.family+(e&&!v?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(g=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(P))&&!/\bi686\b/i.test(P)?(H&&(H.architecture=64,H.family=H.family.replace(RegExp(" *"+g),"")),x&&(/\bWOW64\b/i.test(t)||I&&/\w(?:86|32)$/.test(o.cpuClass||o.platform)&&!/\bWin64; x64\b/i.test(t))&&q.unshift("32-bit")):H&&/^OS X/.test(H.family)&&"Chrome"==x&&parseFloat(A)>=39&&(H.architecture=64),t||(t=null);var L={};return L.description=t,L.layout=U&&U[0],L.manufacturer=j,L.name=x,L.prerelease=M,L.product=F,L.ua=t,L.version=x&&A,L.os=H||{architecture:null,family:null,version:null,toString:function(){return"null"}},L.parse=e,L.toString=function(){return this.description||""},L.version&&q.unshift(A),L.name&&q.unshift(x),H&&x&&(H!=String(H).split(" ")[0]||H!=x.split(" ")[0]&&!F)&&q.push(F?"("+H+")":"on "+H),q.length&&(L.description=q.join(" ")),L}();p.platform=S,void 0!==(i=function(){return S}.call(t,n,t,e))&&(e.exports=i)}).call(this)}).call(t,n(5)(e),n(6))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"==typeof window?"undefined":r(window))&&(n=window)}e.exports=n},function(e,t,n){var a=n(8),i=n(9),r=i;r.v1=a,r.v4=i,e.exports=r},function(e,t,n){var a,i,r=n(0),o=n(1),s=0,u=0;e.exports=function(e,t,n){var l=t&&n||0,c=t||[],d=(e=e||{}).node||a,f=void 0!==e.clockseq?e.clockseq:i;if(null==d||null==f){var h=r();null==d&&(d=a=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==f&&(f=i=16383&(h[6]<<8|h[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,v=p-s+(g-u)/1e4;if(v<0&&void 0===e.clockseq&&(f=f+1&16383),(v<0||p>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,u=g,i=f;var b=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;c[l++]=b>>>24&255,c[l++]=b>>>16&255,c[l++]=b>>>8&255,c[l++]=255&b;var y=p/4294967296*1e4&268435455;c[l++]=y>>>8&255,c[l++]=255&y,c[l++]=y>>>24&15|16,c[l++]=y>>>16&255,c[l++]=f>>>8|128,c[l++]=255&f;for(var m=0;m<6;++m)c[l+m]=d[m];return t||o(c)}},function(e,t,n){var a=n(0),i=n(1);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[r+s]=o[s];return t||i(o)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"debug",value:function(){if(window.logLevel&&window.logLevel>=4){var e=Array.prototype.slice.call(arguments);console.debug.apply(console,e)}}},{key:"error",value:function(){if(!window.logLevel||0!==window.logLevel){var e=Array.prototype.slice.call(arguments);console.error.apply(console,e)}}},{key:"warn",value:function(){if(window.logLevel&&window.logLevel>=2){var e=Array.prototype.slice.call(arguments);console.warn.apply(console,e)}}},{key:"log",value:function(){if(window.logLevel&&window.logLevel>=3){var e=Array.prototype.slice.call(arguments);console.info.apply(console,e)}}},{key:"info",value:function(){if(window.logLevel&&window.logLevel>=3){var e=Array.prototype.slice.call(arguments);console.info.apply(console,e)}}}]),e}();t.default=new i},function(e,t,n){var a,i,r;i=[],a=function(){function e(t,n){var a=function(e,t){var n=window.document,a=n.createElement("div");return a.innerHTML="&nbsp;",a.setAttribute("class",e),a.setAttribute("style",t),n.body.appendChild(a),a}((n=function(e,t){var n={};for(var a in e)n[a]=e[a],t.hasOwnProperty(a)&&(n[a]=t[a]);return n}(e.defaults,n||{})).testNodeClasses,n.testNodeStyle),i=0,r=!1,o=setInterval(function(){i++,((r=function(e){return 0===e.offsetHeight||!document.body.contains(e)||"none"===e.style.display||"hidden"===e.style.visibility}(a))||i===n.testRuns)&&(clearInterval(o),a.parentNode&&a.parentNode.removeChild(a),t(r))},n.testInterval)}return e.defaults={testNodeClasses:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",testNodeStyle:"height: 10px !important; font-size: 20px; color: transparent; position: absolute; bottom: 0; left: -10000px;",testInterval:51,testRuns:4},e},void 0!==(r="function"==typeof a?a.apply(t,i):a)&&(e.exports=r)}])})}).call(t,n(27)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=o(n(29)),r=o(n(30));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"getNotifications",value:function(e){var t=!0;return e&&e.data?e.data.callbackFn&&"function"==typeof e.data.callbackFn?(this.currentRequestHandler=new r.default,t=this.currentRequestHandler.getNotifications(e)):(this.currentRequestHandler=new i.default,t=this.currentRequestHandler.getNotifications(e)):t=!1,t}},{key:"postNotifications",value:function(e){var t=!0;return e&&e.data?e.data.callbackFn&&"function"==typeof e.data.callbackFn?(this.currentRequestHandler=new r.default,t=this.currentRequestHandler.postNotifications(e)):(this.currentRequestHandler=new i.default,t=this.currentRequestHandler.postNotifications(e)):t=!1,t}},{key:"updateNotifications",value:function(e){var t=!0;return e&&e.data?e.data.callbackFn&&"function"==typeof e.data.callbackFn?(this.currentRequestHandler=new r.default,t=this.currentRequestHandler.updateNotifications(e)):(this.currentRequestHandler=new i.default,t=this.currentRequestHandler.updateNotifications(e)):t=!1,t}},{key:"clearBadge",value:function(e){var t=!0;return e&&e.data?e.data.callbackFn&&"function"==typeof e.data.callbackFn?(this.currentRequestHandler=new r.default,t=this.currentRequestHandler.clearBadge(e)):(this.currentRequestHandler=new i.default,t=this.currentRequestHandler.clearBadge(e)):t=!1,t}},{key:"cancelRequest",value:function(){this.currentRequestHandler&&this.currentRequestHandler.cancelRequest()}},{key:"finalize",value:function(){this.cancelRequest(),delete this.currentRequestHandler}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=f(n(5)),o=n(1),s=f(n(4)),u=f(n(9)),l=f(n(2)),c=f(n(0)),d=f(n(11));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"_sanitizeGetNotificationRequest",value:function(e){if(!e||"object"!==(void 0===e?"undefined":a(e)))return c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - Get Notification Request Data can't be empty"),!1;if(!e.namespace||"string"!=typeof e.namespace)return c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'namespace' field can't be empty in ",this.type," Notification Request"),!1;if(e.timestamp&&"number"!=typeof e.timestamp&&(e.timestamp=parseInt(e.timestamp,10),isNaN(e.timestamp)))return c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'timestamp' field Data Type must be 'number'"),!1;if(e.type&&"string"!=typeof e.type)return c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'type' field Data Type must be 'string'"),!1;if(e.subtype&&"string"!=typeof e.subtype)return c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'subtype' field Data Type must be 'string'"),!1;if(e.pinned&&"boolean"!=typeof e.pinned){var t=e.pinned.toString();if("true"===t.toLowerCase())e.pinned=!0;else{if("false"!==t.toLowerCase())return c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'pinned' field Data Type must be 'boolean'"),!1;e.pinned=!1}}return!e.requestContext||"string"==typeof e.requestContext||(c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizeGetNotificationRequest - 'requestContext' field Data Type must be 'string'"),!1)}},{key:"_sanitizePostOrUpdateNotificationRequest",value:function(e){return e&&"object"===(void 0===e?"undefined":a(e))?e.content&&"string"==typeof e.content?e.target&&"string"!=typeof e.target?(c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - 'target' field Data Type must be 'string'"),!1):e.additionalInfo&&e.additionalInfo.requestContext&&"string"!=typeof e.additionalInfo.requestContext?(c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - 'additionalInfo.requestContext' field Data Type must be 'string'"),!1):!e.additionalInfo||!e.additionalInfo.namespace||"string"==typeof e.additionalInfo.namespace||(c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - 'additionalInfo.namespace' field Data Type must be 'string'"),!1):(c.default.warn("UNCEngine: NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - 'content' field can't be empty in ",this.type," Notification request"),!1):(c.default.debug("UNCEngine: NotificationRequestManagerInternal: _sanitizePostOrUpdateNotificationRequest - Post Notification Request Data can't be empty"),!1)}},{key:"_sendRequestToServer",value:function(e){return e.request.responseCallback=this.onResponse.bind(this),e.request.errorCallback=this.onError.bind(this),this._currentCommunicationHandler=new s.default(e.request),!!this._currentCommunicationHandler&&(this._currentCommunicationHandler.SendRequest(e.requestData),!0)}},{key:"_sendPostOrUpdateRequestToServer",value:function(e){if(!this._sanitizePostOrUpdateNotificationRequest(e))return!1;if(!e.target||"server"===e.target){e.additionalInfo&&(this.requestContext=e.additionalInfo.requestContext,this.namespace=e.additionalInfo.namespace);var t={};return!!(t="POST"===this.type?r.default.createNotificationPostRequest(e.content):r.default.createNotificationPutRequest(e.content))&&this._sendRequestToServer(t)}var n=[],a=JSON.parse(e.content);if(!a||!a.notifications||!a.notifications.notification)return c.default.warn("UNCEngine: NotificationRequestManagerInternal: _sendPostOrUpdateRequestToServer - Invalid content in request. Ignore processing."),!1;for(var i=a.notifications.notification,o=0;o<i.length;o+=1)n.push(i[o]);return l.default.notifyObservers(n),!0}},{key:"_addNotificationSearchQueryCriteria",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"EQ",i={};i.field=t,i.value=n,i.operator=a,e.push(i)}},{key:"_createNotificationGetRequest",value:function(e){if(e.criteria)return r.default.createNotificationCriteriaBasedSearchRequest(e.criteria);if(e.type||e.subtype||e.pinned||e.state){var t={AND:[]};e.type&&this._addNotificationSearchQueryCriteria(t.AND,"type",e.type),e.subtype&&this._addNotificationSearchQueryCriteria(t.AND,"sub-type",e.subtype),e.pinned&&this._addNotificationSearchQueryCriteria(t.AND,"metadata.pinned",e.pinned),e.state&&this._addNotificationSearchQueryCriteria(t.AND,"state",e.state),e.timestamp&&this._addNotificationSearchQueryCriteria(t.AND,"sort-timestamp",e.timestamp,"LE");var n={};return n.limit=o.ServerConfigurationManager.pageSize.toString(),n.locale=o.GlobalData.locale,n.criteria=t,r.default.createNotificationCriteriaBasedSearchRequest(n)}return r.default.createNotificationGetRequest(o.ServerConfigurationManager.serverBackFillUri,e.timestamp)}},{key:"getNotifications",value:function(e){if(!this._sanitizeGetNotificationRequest(e.data))return!1;this.type="GET",this.sourceID=e.sourceID;var t=e.data;this.namespace=t.namespace,this.requestContext=t.requestContext;var n=this._createNotificationGetRequest(t);return!!n&&this._sendRequestToServer(n)}},{key:"postNotifications",value:function(e){return this.type="POST",this.sourceID=e.sourceID,this._sendPostOrUpdateRequestToServer(e.data)}},{key:"updateNotifications",value:function(e){return this.type="PUT",this.sourceID=e.sourceID,this._sendPostOrUpdateRequestToServer(e.data)}},{key:"clearBadge",value:function(e){this.type="ClearBadge";var t=r.default.createNotificationBadgeClearRequest(e.data);return!!t&&this._sendRequestToServer(t)}},{key:"cancelRequest",value:function(){this._currentCommunicationHandler&&this._currentCommunicationHandler.CancelRequest()}},{key:"onResponse",value:function(e){switch(c.default.debug("UNCEngine: NotificationRequestManagerInternal: onResponse - response:->",e),this.type){case"GET":var t={notificationResponseList:[]};t.notificationResponseList.push(JSON.parse(e)),t.notify=!1,t.namespace=this.namespace,t.targetID=this.sourceID,setTimeout(u.default.processNotifications,0,t),d.default.resetErrorTypeFailureCount();break;case"POST":case"PUT":if(!this.namespace)break;var n={};n.content=JSON.parse(e),n.requestContext=this.requestContext,l.default.sendMessageToApplet(this.namespace,n,this.sourceID),c.default.debug(n);break;case"ClearBadge":c.default.debug("UNCEngine: NotificationRequestManagerInternal: onResponse - Successfully cleared notifications Un-Read count")}}},{key:"_sendFetchRequestErrorResponse",value:function(e){l.default.sendMessageToApplet(this.namespace,e,this.sourceID)}},{key:"onError",value:function(e){switch(c.default.debug("Error :-",e),this.type){case"GET":var t=0;t=d.default.failedState?1e3*o.ServerConfigurationManager.pollingInterval:0,d.default._handleFetchError(e.errorCode),setTimeout(this._sendFetchRequestErrorResponse.bind(this,e),t);break;case"POST":case"PUT":if(!this.namespace)break;l.default.sendMessageToApplet(this.namespace,e,this.sourceID);break;case"ClearBadge":c.default.debug("UNCEngine: NotificationRequestManagerInternal: onError - Error Occured: ",e.errorCode," on clearing notifications unread count")}if("Unauthorized"===e.errorCode||"InvalidRequest"===e.errorCode){l.default.sendMessageToApplet("RefreshUserProfile",{},"UNCEngine")}}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=f(n(5)),o=n(1),s=f(n(4)),u=f(n(9)),l=f(n(2)),c=f(n(0)),d=f(n(11));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"_sanitizeGetNotificationRequest",value:function(e){if(!e||"object"!==(void 0===e?"undefined":a(e)))return c.default.debug("UNCEngine: HostClientNotificationRequestManager: _sanitizeGetNotificationRequest - Get Notification Request Data can't be empty"),!1;if(!e.callbackFn||"function"!=typeof e.callbackFn)return c.default.debug("UNCEngine: HostClientNotificationRequestManager: _sanitizeGetNotificationRequest - 'callbackFn' field can't be empty in ",this.type," Notification Request"),!1;if(e.timestamp&&"number"!=typeof e.timestamp&&(e.timestamp=parseInt(e.timestamp,10),isNaN(e.timestamp)))return c.default.debug("UNCEngine: HostClientNotificationRequestManager: _sanitizeGetNotificationRequest - 'timestamp' field Data Type must be 'number'"),!1;if(e.typeSubtypesList&&!Array.isArray(e.typeSubtypesList))return!1;if(e.pinned&&"boolean"!=typeof e.pinned){var t=e.pinned.toString();if("true"===t.toLowerCase())e.pinned=!0;else{if("false"!==t.toLowerCase())return c.default.debug("UNCEngine: HostClientNotificationRequestManager: _sanitizeGetNotificationRequest - 'pinned' field Data Type must be 'boolean'"),!1;e.pinned=!1}}return!0}},{key:"_sanitizePostOrUpdateNotificationRequest",value:function(e){return e&&"object"===(void 0===e?"undefined":a(e))?e.content&&"string"==typeof e.content?e.target&&"string"!=typeof e.target?(c.default.debug("UNCEngine: HostClientNotificationRequestManager: _sanitizePostOrUpdateNotificationRequest - 'target' field Data Type must be 'string'"),!1):!e.callbackFn||"function"==typeof e.callbackFn||(c.default.debug("UNCEngine: HostClientNotificationRequestManager: _sanitizePostOrUpdateNotificationRequest - 'callbackFn' field Data Type must be 'function'"),!1):(c.default.warn("UNCEngine: HostClientNotificationRequestManager: _sanitizePostOrUpdateNotificationRequest - 'content' field can't be empty in ",this.type," Notification request"),!1):(c.default.debug("UNCEngine: HostClientNotificationRequestManager: _sanitizePostOrUpdateNotificationRequest - Post Notification Request Data can't be empty"),!1)}},{key:"_sendRequestToServer",value:function(e){return e.request.responseCallback=this.onResponse.bind(this),e.request.errorCallback=this.onError.bind(this),this._currentCommunicationHandler=new s.default(e.request),!!this._currentCommunicationHandler&&(this._currentCommunicationHandler.SendRequest(e.requestData),!0)}},{key:"_sendPostOrUpdateRequestToServer",value:function(e){if(!this._sanitizePostOrUpdateNotificationRequest(e))return!1;if(!e.target||"server"===e.target){e.callbackFn&&(this.callbackFn=e.callbackFn),e.requestContext&&(this.requestContext=e.requestContext);var t={};return!!(t="POST"===this.type?r.default.createNotificationPostRequest(e.content):r.default.createNotificationPutRequest(e.content))&&this._sendRequestToServer(t)}var n=[],a=JSON.parse(e.content);if(!a||!a.notifications||!a.notifications.notification)return c.default.warn("UNCEngine: HostClientNotificationRequestManager: _sendPostOrUpdateRequestToServer - Invalid content in request. Ignore processing."),!1;for(var i=a.notifications.notification,o=0;o<i.length;o+=1)n.push(i[o]);return l.default.notifyObservers(n),!0}},{key:"_addNotificationSearchQueryCriteria",value:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"EQ",i={};i.field=t,i.value=n,i.operator=a,e.push(i)}},{key:"_getCriterionObjectBasedOnRequestData",value:function(e){for(var t={},n=e.typeSubtypesList,a={OR:[]},i=0;i<n.length;i+=1){var r={AND:[]},o=n[i];r.AND.push({field:"type",value:o.type,operator:"EQ"}),r.AND.push({field:"sub-type",value:o.subtype,operator:"EQ"}),a.OR.push(r)}var s={AND:[]};if(s.AND.push(a),s.AND.push({field:"state",value:"EXPIRED",operator:"NE"}),e.timestamp>0){var u={AND:[]};u.AND.push(s);var l={field:"sort-timestamp",value:e.timestamp,operator:"LT"};u.AND.push(l),t=u}else t=s;return t}},{key:"_createNotificationGetRequest",value:function(e){if(e.criteria)return r.default.createNotificationCriteriaBasedSearchRequest(e.criteria);if(e.typeSubtypesList&&Array.isArray(e.typeSubtypesList)){var t=this._getCriterionObjectBasedOnRequestData(e),n={};return n.locale=o.GlobalData.locale,n.criteria=t,r.default.createNotificationCriteriaBasedSearchRequest(n)}return r.default.createNotificationGetRequest(o.ServerConfigurationManager.serverBackFillUri,e.timestamp)}},{key:"getNotifications",value:function(e){if(!this._sanitizeGetNotificationRequest(e.data))return!1;this.type="GET";var t=e.data;this.callbackFn=t.callbackFn,this.requestContext=t.requestContext;var n=this._createNotificationGetRequest(t);return!!n&&this._sendRequestToServer(n)}},{key:"postNotifications",value:function(e){return this.type="POST",this._sendPostOrUpdateRequestToServer(e.data)}},{key:"updateNotifications",value:function(e){return this.type="PUT",this._sendPostOrUpdateRequestToServer(e.data)}},{key:"clearBadge",value:function(e){this.type="ClearBadge";var t=r.default.createNotificationBadgeClearRequest(e.data);return!!t&&this._sendRequestToServer(t)}},{key:"cancelRequest",value:function(){this._currentCommunicationHandler&&this._currentCommunicationHandler.CancelRequest()}},{key:"onResponse",value:function(e){switch(c.default.debug("UNCEngine: HostClientNotificationRequestManager: onResponse - response:->",e),this.type){case"GET":var t={notificationResponseList:[]};t.notificationResponseList.push(JSON.parse(e)),t.notify=!1,t.requestContext=this.requestContext,t.callbackFn=this.callbackFn,setTimeout(u.default.processNotifications,0,t),d.default.resetErrorTypeFailureCount();break;case"POST":case"PUT":if(!this.callbackFn)break;var n={};n.data=JSON.parse(e),this.requestContext&&(n.requestContext=this.requestContext);try{this.callbackFn&&"function"==typeof this.callbackFn&&this.callbackFn(n)}catch(e){c.default.error("UNCEngine: HostClientNotificationRequestManager: onResponse - Callback exception: ",e)}c.default.debug(n);break;case"ClearBadge":c.default.debug("UNCEngine: HostClientNotificationRequestManager: onResponse - Successfully cleared notifications Un-Read count")}}},{key:"_sendFetchRequestErrorResponse",value:function(e){if(this.callbackFn){var t={};t.data=e,this.requestContext&&(t.requestContext=this.requestContext);try{this.callbackFn&&"function"==typeof this.callbackFn&&this.callbackFn(t)}catch(e){c.default.error("UNCEngine: HostClientNotificationRequestManager: onResponse - Callback exception: ",e)}}}},{key:"onError",value:function(e){switch(c.default.debug("Error :-",e),this.type){case"GET":var t=0;t=d.default.failedState?1e3*o.ServerConfigurationManager.pollingInterval:0,d.default._handleFetchError(e.errorCode),setTimeout(this._sendFetchRequestErrorResponse.bind(this,e),t);break;case"POST":case"PUT":if(!this.callbackFn)break;var n={};n.data=e,this.requestContext&&(n.requestContext=this.requestContext);try{this.callbackFn&&"function"==typeof this.callbackFn&&this.callbackFn(n)}catch(e){c.default.error("UNCEngine: HostClientNotificationRequestManager: onResponse - Callback exception: ",e)}break;case"ClearBadge":c.default.debug("UNCEngine: HostClientNotificationRequestManager: onError - Error Occured: ",e.errorCode," on clearing notifications unread count")}if("Unauthorized"===e.errorCode||"InvalidRequest"===e.errorCode){l.default.sendMessageToApplet("RefreshUserProfile",{},"UNCEngine")}}},{key:"finalize",value:function(){cancelRequest(),delete this._currentCommunicationHandler}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=f(n(32)),r=f(n(33)),o=f(n(35)),s=f(n(36)),u=f(n(9)),l=f(n(2)),c=n(1),d=f(n(0));function f(e){return e&&e.__esModule?e:{default:e}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._setServerCommunicationPreferenceOrder(t),this._shouldResume=!1,this._currentPreferenceOrderIndex=0,this._futureNotificationsData=new s.default,this._initializationData={futureNotificationsData:this._futureNotificationsData,responseCallback:this.onResponse.bind(this),errorCallback:this.onError.bind(this)}}return a(e,[{key:"_setServerCommunicationPreferenceOrder",value:function(e){this._preferenceOrder=e}},{key:"registerDevice",value:function(){"devicePush"===this._preferenceOrder[this._currentPreferenceOrderIndex]&&this._currentCommunicationHandler.registerDevice()}},{key:"isCurrentCommunicationHandlerDevicePush",value:function(){return"devicePush"===this._preferenceOrder[this._currentPreferenceOrderIndex]}},{key:"switchToLongPoll",value:function(){if("devicePush"===this._preferenceOrder[this._currentPreferenceOrderIndex])l.default.sendMessageToApplet("SendDevicePushDisabledAnalytics",{},"UNCEngine"),this._currentCommunicationHandler.cancelRequest(),delete this._currentCommunicationHandler,this._currentPreferenceOrderIndex=this._preferenceOrder.indexOf("poll"),this.executeRequest();else if(c.GlobalData.pushDeviceID){new r.default(this._initializationData).unRegisterDevice()}}},{key:"switchToDevicePush",value:function(){"devicePush"!==this._preferenceOrder[this._currentPreferenceOrderIndex]?(this._currentCommunicationHandler.cancelRequest(),delete this._currentCommunicationHandler,this._currentPreferenceOrderIndex=this._preferenceOrder.indexOf("devicePush"),this.executeRequest()):"windows"===c.GlobalData.platform&&c.GlobalData.context.ChannelURInew!==c.GlobalData.context.ChannelURI&&(d.default.warn("UNCEngine: FutureNotificationsManager: Channel URI updated for Windows"),this._currentPreferenceOrderIndex=this._preferenceOrder.indexOf("devicePush"),this.executeRequest())}},{key:"fetchDevicePushNotifications",value:function(e){"devicePush"===this._preferenceOrder[this._currentPreferenceOrderIndex]&&this._currentCommunicationHandler.fetchNotificationsFromServer(e)}},{key:"forceNotificationsFetchIfLongpoll",value:function(){"poll"===this._preferenceOrder[this._currentPreferenceOrderIndex]&&this._currentCommunicationHandler.forceFetchNotificationsFromServer()}},{key:"executeRequest",value:function(){switch(this._preferenceOrder[this._currentPreferenceOrderIndex]){case"webPush":this._currentCommunicationHandler=new i.default(this._initializationData);break;case"devicePush":return"windows"===c.GlobalData.platform&&(c.GlobalData.context.ChannelURI=c.GlobalData.context.ChannelURInew),this._currentCommunicationHandler=new r.default(this._initializationData),void this._currentCommunicationHandler.registerDevice();case"poll":this._currentCommunicationHandler=new o.default(this._initializationData);break;default:d.default.warn("UNCEngine: FutureNotificationsManager: executeRequest: default - Server Communication Preference Type: ",this.preferenceOrder[this._currentPreferenceOrderIndex]," is currently not supported")}this._currentCommunicationHandler.fetchNotificationsFromServer()}},{key:"resumeRequest",value:function(){this._shouldResume&&(this._shouldResume=!1,this._currentCommunicationHandler?this._currentCommunicationHandler.fetchNotificationsFromServer():this.executeRequest())}},{key:"onResponse",value:function(e){d.default.debug("UNCEngine: FutureNotificationsManager: onResponse - Notification List to be notified",e);var t={};t.notificationResponseList=e,t.notify=!0,u.default.processNotifications(t)}},{key:"onError",value:function(e){switch(d.default.debug("UNCEngine: FutureNotificationsManager: onError - Error :-",e),e){case"NotSupported":this._currentPreferenceOrderIndex+=1,this._currentPreferenceOrderIndex<this._preferenceOrder.length&&this.executeRequest();break;case"UnSupported_Browser":case"Insufficient_Memory":case"UnSupported_Url_Scheme":case"UnSupported_Method_Type":case"Url_Scheme_Missing":case"Url_Hostname_Missing":case"Method_Type_Missing":case"InvalidRequest":d.default.debug("UNCEngine: FutureNotificationsManager: onError - Error encountered: ",e," Stopping Future Notification Fetch"),delete this._currentCommunicationHandler,this._shouldResume=!0;break;case"Unauthorized":l.default.sendMessageToApplet("RefreshUserProfile",{},"UNCEngine"),this._shouldResume=!0}}},{key:"cancelRequest",value:function(){this._currentCommunicationHandler.cancelRequest()}},{key:"finalize",value:function(){delete this._currentCommunicationHandler}}]),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errorCallback=t.errorCallback}return a(e,[{key:"fetchNotificationsFromServer",value:function(){this.errorCallback("NotSupported")}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(1),r=d(n(5)),o=d(n(34)),s=d(n(3)),u=d(n(4)),l=d(n(2)),c=d(n(0));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.futureNotificationsData=t.futureNotificationsData,this.currentFutureRequestTimestamp=this.futureNotificationsData.nextFutureRequestTimestamp,this.responseCallback=t.responseCallback,this.getFutureNotificationsData=!0,this.continueFetch=!1,this.fetchingNotifications=!1,this.errorCallback=t.errorCallback,this.notificationResponseList=[],this.pollingFailureFlag=!1,this.requestFailureTypeAndCount={},this._initializeErrorTypeFailureCount()}return a(e,[{key:"_handleDeviceRegistrationResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("macos"===i.GlobalData.platform){var t=void 0,n=[];if(e.error){if(t=s.default.SwitchedToLongPollEvent,e.error.statusCode){var a={};a[s.default.DevicePushFailureErrorCode]=e.error.statusCode.toString(),n.push(a)}if(e.error.errorCode){var r={};r[s.default.DevicePushFailureReason]=e.error.errorCode,n.push(r)}delete e.error}else t=s.default.DevicePushSet;o.default.sendAnalytics(t,n)}if("windows"===i.GlobalData.platform){var u=void 0,c=[],d=s.default.SwitchedToLongPollEventWin;if(e.error){u=s.default.DevicePushDisabledWin;var f={};if(f[s.default.DevicePushFailureReasonWin]="ERROR_FROM_ANS",c.push(f),e.error.statusCode){var h={};h[s.default.DevicePushFailureErrorCode]=e.error.statusCode.toString(),c.push(h)}if(e.error.errorCode){var p={};p[s.default.DevicePushFailureReason]=e.error.errorCode,c.push(p)}delete e.error}else u=s.default.DevicePushEnabledWin;o.default.sendAnalytics(d,c,u)}l.default.sendMessageToApplet("DeviceRegistered",e,s.default.CONTAINER_BL)}},{key:"registerDevice",value:function(){if(!i.GlobalData.isDevicePushEnabled)return c.default.warn("UNCEngine: DevicePushCommunicationHandler: registerDevice - DevicePush is currently disabled. Ignoring request"),i.GlobalData.pushDeviceID&&(c.default.warn("UNCEngine: DevicePushCommunicationHandler: registerDevice - Unregistering the device from server"),this.unRegisterDevice()),l.default.sendMessageToApplet("SendDevicePushDisabledAnalytics",{},"UNCEngine"),l.default.sendMessageToApplet("DeviceRegistered",{},s.default.CONTAINER_BL),this.errorCallback("NotSupported");var e={};if(!(e=r.default.createDeviceRegistrationRequest())){if(!i.GlobalData.machineDeviceToken){var t={error:{}};return t.error.errorCode=s.default.DeviceTokenNotAvailable,c.default.warn("UNCEngine: DevicePushCommunicationHandler: registerDevice - Unable to create httpRequest. Machine Device Token is not available"),this._handleDeviceRegistrationResponse(t),this.errorCallback("NotSupported")}return c.default.warn("UNCEngine: DevicePushCommunicationHandler: registerDevice - Unable to create httpRequest. AccessToken is not valid"),this.errorCallback("InvalidRequest")}e.request.responseCallback=function(e){var t=JSON.parse(e);i.GlobalData.pushDeviceID=t["device-id"],this._handleDeviceRegistrationResponse(t)}.bind(this),e.request.errorCallback=function(e){var t={};t.error=e,this._handleDeviceRegistrationResponse(t),c.default.error("UNCEngine: DevicePushCommunicationHandler: registerDevice - Error Occured in Device Registration ",e),this.errorCallback("NotSupported")}.bind(this),new u.default(e.request).SendRequest(e.requestData)}},{key:"unRegisterDevice",value:function(){var e={};if(!(e=r.default.createDeviceUnRegistrationRequest()))return c.default.warn("UNCEngine: DevicePushCommunicationHandler: unRegisterDevice - Unable to create httpRequest. Either AccessToken or AppID is not valid"),this.onError({errorCode:"InvalidRequest"});e.request.responseCallback=function(){c.default.info("UNCEngine: DevicePushCommunicationHandler: unRegisterDevice - Device is successfuly un-registered")},e.request.errorCallback=function(e){c.default.error("UNCEngine: DevicePushCommunicationHandler: unRegisterDevice - Error Occured in Device UnRegistration ",e),this.errorCallback("NotSupported")}.bind(this),new u.default(e.request).SendRequest(e.requestData);l.default.sendMessageToApplet("DeviceUnRegistered",{},s.default.CONTAINER_BL),delete i.GlobalData.pushDeviceID}},{key:"_handlePollingRequestFailure",value:function(e){if(!this.pollingFailureFlag){var t=0,n=0;switch(e){case"Timeout":this.requestFailureTypeAndCount.timeoutFailureCount+=1,n=this.requestFailureTypeAndCount.timeoutFailureCount,t=s.default.TimeOutErrorCountLimit;break;case"ClientFailure":this.requestFailureTypeAndCount.clientFailureCount+=1,n=this.requestFailureTypeAndCount.clientFailureCount,t=s.default.ClientErrorCountLimit;break;case"ServerFailure":this.requestFailureTypeAndCount.serverFailureCount+=1,n=this.requestFailureTypeAndCount.serverFailureCount,t=s.default.ServerErrorCountLimit;break;case"NetworkFailure":this.requestFailureTypeAndCount.internalNetworkFailureCount+=1,n=this.requestFailureTypeAndCount.internalNetworkFailureCount,t=s.default.InternalNetworkErrorCountLimit}n===t&&(c.default.warn("UNCEngine: DevicePushCommunicationHandler: _handlePollingRequestFailure - Polling failures of type:",e," has reached its failure count limit. Adding delay in successive Polls(if failure persisits)"),this.pollingFailureFlag=!0,this._initializeErrorTypeFailureCount())}}},{key:"_fetchNotificationsFromServerHelper",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n={},a=i.ServerConfigurationManager.serverShortPollUri;if(!(n=e||t?r.default.createNotificationGetRequest(a,t,e):r.default.createNotificationGetRequest(a,"",this.futureNotificationsData.nextFutureRequestTimestamp.toString())))return c.default.warn("UNCEngine: DevicePushCommunicationHandler: fetchNotificationsFromServer - Unable to create httpRequest. Either AccessToken or AppID is not valid"),this.onError({errorCode:"InvalidRequest"});n.request.responseCallback=this.onResponse.bind(this),n.request.errorCallback=this.onError.bind(this),new u.default(n.request).SendRequest(n.requestData)}},{key:"_getCurrentUserID",value:function(){var e=l.default.sendMessageToParent("GetUserProfile",!1);return e?e.UserID:null}},{key:"_isFetchNotificationRequestValid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getCurrentUserID();return e["ans-target-id"]&&e["ans-target-id"]!==t?(c.default.warn("UNCEngine: DevicePushCommunicationHandler: _isFetchNotificationRequestValid - Current UserID: ",t,"does not match with: ",e["ans-target-id"]),!1):!e["ans-device-id"]||e["ans-device-id"]===i.GlobalData.pushDeviceID||(c.default.warn("UNCEngine: DevicePushCommunicationHandler: _isFetchNotificationRequestValid - Current DeviceID: ",i.GlobalData.pushDeviceID,"does not match with: ",e["ans-device-id"]),!1)}},{key:"fetchNotificationsFromServer",value:function(e){i.GlobalData.pushDeviceID?this._isFetchNotificationRequestValid(e)&&(this.pollingFailureFlag?c.default.warn("UNCEngine: DevicePushCommunicationHandler: fetchNotificationsFromServer - In an error condition. Ignoring Request"):this.fetchingNotifications?this.continueFetch=!0:(this.fetchingNotifications=!0,this._fetchNotificationsFromServerHelper())):c.default.warn("UNCEngine: DevicePushCommunicationHandler: fetchNotificationsFromServer - Device is not yet registered with Server. Ignoring Request")}},{key:"_sanitizeFutureTimestamp",value:function(e){e&&this.futureNotificationsData.nextFutureRequestTimestamp-e>0&&(c.default.debug("UNCEngine: DevicePushCommunicationHandler: _sanitizeFutureTimestamp - Next Future timestamp value doesn't seem correct. Setting it to current servertimestamp value"),this.futureNotificationsData.nextFutureRequestTimestamp=e)}},{key:"_initializeErrorTypeFailureCount",value:function(){this.requestFailureTypeAndCount.timeoutFailureCount=0,this.requestFailureTypeAndCount.clientFailureCount=0,this.requestFailureTypeAndCount.serverFailureCount=0,this.requestFailureTypeAndCount.internalNetworkFailureCount=0}},{key:"_resetPollingFailure",value:function(){this.pollingFailureFlag=!1,this._initializeErrorTypeFailureCount()}},{key:"_triggerNotificationFetchOperation",value:function(){var e=0;e=this.pollingFailureFlag?1e3*i.ServerConfigurationManager.pollingInterval:s.default.OneSecond,setTimeout(this._fetchNotificationsFromServerHelper.bind(this),e)}},{key:"onResponse",value:function(e){c.default.debug("UNCEngine: DevicePushCommunicationHandler: onResponse - Notification:-> ",e);var t=JSON.parse(e),n=t.notifications.notification;this.notificationResponseList.push(t),this.getFutureNotificationsData&&(this.currentFutureRequestTimestamp=this.futureNotificationsData.nextFutureRequestTimestamp,this.futureNotificationsData.nextFutureRequestTimestamp=n.length>0?parseInt(n[0].timestamp,10)+1:this.currentFutureRequestTimestamp,this._sanitizeFutureTimestamp(parseInt(t["server-timestamp"],10)));var a=i.ServerConfigurationManager.pageSize;if(n.length===a){this.getFutureNotificationsData=!1;var r=parseInt(n[a-1].timestamp,10);this._fetchNotificationsFromServerHelper(this.currentFutureRequestTimestamp.toString(),(r-1).toString())}else this.responseCallback(this.notificationResponseList),this.notificationResponseList.length=0,this.getFutureNotificationsData=!0,this.fetchingNotifications=!1,this._resetPollingFailure(),this.continueFetch&&(this.continueFetch=!1,this._triggerNotificationFetchOperation())}},{key:"onError",value:function(e){this.notificationResponseList.length=0,this.getFutureNotificationsData=!0,this.fetchingNotifications=!1;var t=!0;switch(e.errorCode){case"Unauthorized":this.errorCallback(e.errorCode),t=!1;break;case"UnSupported_Browser":case"Insufficient_Memory":case"UnSupported_Url_Scheme":case"UnSupported_Method_Type":case"Url_Hostname_Missing":case"Method_Type_Missing":case"InvalidRequest":this.errorCallback(e.errorCode),t=!1;break;case"Internal_Server_Error":case"Request_Not_Implemented":case"Bad_Gateway":case"Service_Unavailable":case"Gateway_Timeout":case"Server_Response_Error":this._handlePollingRequestFailure("ServerFailure");break;case"Network_Failure":this._handlePollingRequestFailure("NetworkFailure");break;case"Request_Timeout":this._handlePollingRequestFailure("Timeout");break;default:this._handlePollingRequestFailure("ClientFailure")}t&&this._triggerNotificationFetchOperation()}},{key:"cancelRequest",value:function(){this.unRegisterDevice()}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=s(n(3)),r=s(n(2)),o=s(n(0));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"sendAnalytics",value:function(e,t,n){if(e){var a={eventParamData:{eventParam:[]}};a.eventCode=e,a.eventSubCode=n,a.eventParamData.eventParam=t,r.default.sendMessageToApplet("SendAnalyticsFromJS",a,i.default.CONTAINER_BL)}else o.default.info("NotificationUtils: sendAnalytics - EventCode cannot be empty()")}}]),e}();t.default=new u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(1),r=l(n(5)),o=l(n(3)),s=l(n(4)),u=l(n(0));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.forceFetchNotificationsFromServer=function(){u.default.debug("UNCEngine: PollCommunicationHandler: forceFetchNotificationsFromServer: Reached"),n.isFetchingNotifications?u.default.debug("UNCEngine: PollCommunicationHandler: forceFetchNotificationsFromServer: Already fetching notifications ignoring"):n.timeoutFn&&(clearTimeout(n.timeoutFn),n.timeoutFn=null,u.default.debug("PollCommunicationHandler: forceFetchNotificationsFromServer: triggering to fetch notifications from server forcefully"),n.fetchNotificationsFromServer())},this.futureNotificationsData=t.futureNotificationsData,this.currentFutureRequestTimestamp=this.futureNotificationsData.nextFutureRequestTimestamp,this.responseCallback=t.responseCallback,this.getFutureNotificationsData=!0,this.errorCallback=t.errorCallback,this.notificationResponseList=[],this.longPollFailureFlag=!1,this.requestFailureTypeAndCount={},this.currentNetworkCommunicatorObj=null,this._initializeErrorTypeFailureCount(),this.isFetchingNotifications=!1,this.timeoutFn=null}return a(e,[{key:"_handleLongPollRequestFailure",value:function(e){if(!this.longPollFailureFlag){var t=0,n=0;switch(e){case"Timeout":this.requestFailureTypeAndCount.timeoutFailureCount+=1,n=this.requestFailureTypeAndCount.timeoutFailureCount,t=o.default.TimeOutErrorCountLimit;break;case"ClientFailure":this.requestFailureTypeAndCount.clientFailureCount+=1,n=this.requestFailureTypeAndCount.clientFailureCount,t=o.default.ClientErrorCountLimit;break;case"ServerFailure":this.requestFailureTypeAndCount.serverFailureCount+=1,n=this.requestFailureTypeAndCount.serverFailureCount,t=o.default.ServerErrorCountLimit;break;case"NetworkFailure":this.requestFailureTypeAndCount.internalNetworkFailureCount+=1,n=this.requestFailureTypeAndCount.internalNetworkFailureCount,t=o.default.InternalNetworkErrorCountLimit}n===t&&(u.default.warn("UNCEngine: PollCommunicationHandler: _handleLongPollRequestFailure - LongPoll failures of type:",e," has reached its failure count limit. Adding delay in successive LongPolls(if failure persisits)"),this.longPollFailureFlag=!0,this._initializeErrorTypeFailureCount())}}},{key:"fetchNotificationsFromServer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=!1;r.default.isNELongPollEnabled()&&(n=!0);var a={},o=n?i.ServerConfigurationManager.serverLongPollUri:i.ServerConfigurationManager.serverShortPollUri;if(!(a=e||t?r.default.createNotificationGetRequest(o,t,e,n,!1):r.default.createNotificationGetRequest(o,"",this.futureNotificationsData.nextFutureRequestTimestamp.toString(),n,!0)))return u.default.warn("UNCEngine: PollCommunicationHandler: fetchNotificationsFromServer - Unable to create httpRequest. Either AccessToken or AppID is not valid"),this.onError({errorCode:"InvalidRequest"});if(a.error)return this.onError(a);this.isFetchingNotifications=!0,u.default.debug("UNCEngine: PollCommunicationHandler: fetchNotificationsFromServer: calling to fetch notifications from server"),a.request.responseCallback=this.onResponse.bind(this),a.request.errorCallback=this.onError.bind(this);var l=new s.default(a.request);l.SendRequest(a.requestData),this.currentNetworkCommunicatorObj=l}},{key:"_sanitizeFutureTimestamp",value:function(e){e&&this.futureNotificationsData.nextFutureRequestTimestamp-e>0&&(u.default.debug("UNCEngine: PollCommunicationHandler: _sanitizeFutureTimestamp - Next Future timestamp value doesn't seem correct. Setting it to current servertimestamp value"),this.futureNotificationsData.nextFutureRequestTimestamp=e)}},{key:"_initializeErrorTypeFailureCount",value:function(){this.requestFailureTypeAndCount.timeoutFailureCount=0,this.requestFailureTypeAndCount.clientFailureCount=0,this.requestFailureTypeAndCount.serverFailureCount=0,this.requestFailureTypeAndCount.internalNetworkFailureCount=0}},{key:"_resetLongPollFailure",value:function(){this.longPollFailureFlag=!1,this._initializeErrorTypeFailureCount()}},{key:"_triggerNotificationFetchOperation",value:function(){var e=0;e=this.longPollFailureFlag?1e3*i.ServerConfigurationManager.pollingInterval:o.default.OneSecond,this.timeoutFn=setTimeout(this.fetchNotificationsFromServer.bind(this),e)}},{key:"onResponse",value:function(e){this.isFetchingNotifications=!1,u.default.debug("UNCEngine: PollCommunicationHandler: onResponse - Notification:-> ",e);var t=JSON.parse(e),n=t.notifications.notification;this.notificationResponseList.push(t),this.getFutureNotificationsData&&(this.currentFutureRequestTimestamp=this.futureNotificationsData.nextFutureRequestTimestamp,this.futureNotificationsData.nextFutureRequestTimestamp=n.length>0?parseInt(n[0].timestamp,10)+1:this.currentFutureRequestTimestamp,this._sanitizeFutureTimestamp(parseInt(t["server-timestamp"],10)));var a=i.ServerConfigurationManager.pageSize;if(n.length===a){this.getFutureNotificationsData=!1;var r=parseInt(n[a-1].timestamp,10);this.fetchNotificationsFromServer(this.currentFutureRequestTimestamp.toString(),(r-1).toString())}else this.responseCallback(this.notificationResponseList),this.notificationResponseList.length=0,this.getFutureNotificationsData=!0,this._resetLongPollFailure(),this._triggerNotificationFetchOperation()}},{key:"onError",value:function(e){this.isFetchingNotifications=!1,u.default.debug("UNCEngine: PollCommunicationHandler: onError received."),this.notificationResponseList.length=0,this.getFutureNotificationsData=!0;var t=!0;switch(e.errorCode){case"Unauthorized":this.errorCallback(e.errorCode),t=!1;break;case"UnSupported_Browser":case"Insufficient_Memory":case"UnSupported_Url_Scheme":case"UnSupported_Method_Type":case"Url_Hostname_Missing":case"Method_Type_Missing":case"InvalidRequest":this.errorCallback(e.errorCode),t=!1;break;case"Internal_Server_Error":case"Request_Not_Implemented":case"Bad_Gateway":case"Service_Unavailable":case"Gateway_Timeout":case"Server_Response_Error":this._handleLongPollRequestFailure("ServerFailure");break;case"Network_Failure":this._handleLongPollRequestFailure("NetworkFailure");break;case"Request_Timeout":this._handleLongPollRequestFailure("Timeout");break;default:this._handleLongPollRequestFailure("ClientFailure")}t&&this._triggerNotificationFetchOperation()}},{key:"cancelRequest",value:function(){this.currentNetworkCommunicatorObj&&this.currentNetworkCommunicatorObj.CancelRequest()}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=n(1);var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nextFutureRequestTimestamp=i.GlobalData.serverTimestampOnLaunch}return a(e,[{key:"nextFutureRequestTimestamp",get:function(){return this._nextFutureRequestTimestamp},set:function(e){this._nextFutureRequestTimestamp=e}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=l(n(4)),r=l(n(2)),o=l(n(0)),s=l(n(3)),u=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"_handleNotificationPreferenceFetchResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.default.debug("UNCEngine: NotificationPreferenceManager :: _handleNotificationPreferenceResponse ",e),r.default.sendMessageToApplet("NotificationPreferenceFetched",e,s.default.CCDCONTAINER_JS)}},{key:"_handleNotificationPreferenceSetResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.default.debug("UNCEngine: NotificationPreferenceManager :: _handleNotificationPreferenceSetResponse ",e),r.default.sendMessageToApplet("NotificationPreferenceSet",e,s.default.CCDCONTAINER_JS)}},{key:"getPreference",value:function(e){o.default.debug("UNCEngine: NotificationPreferenceManager :: getPreference data is ",e);var t={};if(t=u.default.createPreferencesGetRequest(e)){o.default.debug("UNCEngine: NotificationPreferenceManager :: request to get notification preferences ",t.request),t.request.responseCallback=function(e){var t=JSON.parse(e);this._handleNotificationPreferenceFetchResponse(t)}.bind(this),t.request.errorCallback=function(e){var t={};t.error=e,this._handleNotificationPreferenceFetchResponse(t),o.default.warn("UNCEngine: NotificationPreferenceManager: GetNotificationPreferences - Error Occured  ",e)}.bind(this);var n=new i.default(t.request);n.SendRequest(t.requestData),this.currentNetworkCommunicatorObj=n}else{o.default.warn("UNCEngine: NotificationPreferenceManager :: getPreference http request creation failed");var a={error:{statusCode:"HTTP request creation failed",errorCode:"Failed to get http request"}};this._handleNotificationPreferenceFetchResponse(a)}}},{key:"setPreference",value:function(e){o.default.debug("UNCEngine: NotificationPreferenceManager :: setPreference data is ",e);var t={};if(t=u.default.createPreferencesSetRequest(e)){o.default.debug("UNCEngine: NotificationPreferenceManager :: request to set notification preferences ",t.request),t.request.responseCallback=function(e){var t=JSON.parse(e);this._handleNotificationPreferenceSetResponse(t)}.bind(this),t.request.errorCallback=function(e){var t={};t.error=e,this._handleNotificationPreferenceSetResponse(t),o.default.error("UNCEngine: NotificationPreferenceManager :: SetPreferences - Error Occured ",e)}.bind(this);var n=new i.default(t.request);n.SendRequest(t.requestData),this.currentNetworkCommunicatorObj=n}else{o.default.warn("UNCEngine: NotificationPreferenceManager :: setPreference http request creation failed");var a={error:{statusCode:"HTTP request creation failed",errorCode:"Failed to get http request"}};this._handleNotificationPreferenceSetResponse(a)}}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.AccountType="",this.UserID="",this.Email="",this.DisplayName="",this.FirstName="",this.LastName="",this.Name="",this.CountryCode="",t.userGuid?this.UserID=t.userGuid:this.UserID=t.userId,t.accessToken?this.AccessToken=t.accessToken:this.AccessToken=t.access_token,t.account_type&&(this.AccountType=t.account_type),t.email&&(this.Email=t.email),t.displayname&&(this.DisplayName=t.displayname),t.first_name&&(this.FirstName=t.first_name),t.last_name&&(this.LastName=t.last_name),t.name&&(this.Name=t.name),t.countryCode&&(this.CountryCode=t.countryCode)}return a(e,null,[{key:"sanitizeUserProfile",value:function(e){return!(!e.access_token&&!e.accessToken||!e.userId&&!e.userGuid)}}]),e}();t.default=i},function(e,t,n){"use strict";window.logLevel=4}]);